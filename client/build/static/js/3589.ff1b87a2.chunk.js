"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[3589],{15909:function(e,t,r){r.d(t,{D:function(){return n}});var o=r(80292);function n(e){e&&e.writtenProperties&&e.writtenProperties.forEach((function(e){var t=e.target,r=e.propName,n=e.newOrigin;(0,o.l)(t)&&n&&t.originOf(r)!==n&&t.updateOrigin(r,n)}))}},80292:function(e,t,r){function o(e){return e&&"getAtOrigin"in e&&"originOf"in e}r.d(t,{l:function(){return o}})},3589:function(e,t,r){r.r(t),r.d(t,{default:function(){return Ot}});var o=r(93433),n=r(74165),i=r(15671),s=r(43144),a=r(60136),l=r(54062),u=r(15861),p=r(37762),c=r(27366),y=r(42265),d=r(59486),f=r(52639),v=r(44055),m=(r(94931),r(78451),r(98689),r(57823),r(32066),r(49018),r(34999),r(79850),r(9014)),h=r(40281),b=r(10064),w=r(41691),g=r(32718),_=r(92026),Z=r(97642),S=r(18202),C=r(66978),B=r(94172),T=r(68860),k=r(35995),N=r(49861),P=(r(63780),r(93169),r(25243)),A=r(38511),L=r(69912),I=r(31201),R=r(15909),j=r(53866),x=r(79803),O=r(92975),J=r(30651),D=r(6693),M=r(6061),E=r(29598),F=r(56811),W=r(25899),G=r(51508),U=r(46784),q=r(16072),z=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).break=new q.default({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}}),o.first=new q.default({color:[0,255,0],size:20,outline:{color:[255,255,255],width:4}}),o.unlocated=new q.default({color:[255,0,0],size:12,outline:{color:[255,255,255],width:3}}),o.last=new q.default({color:[255,0,0],size:20,outline:{color:[255,255,255],width:4}}),o.middle=new q.default({color:[51,51,51],size:12,outline:{color:[0,122,194],width:3}}),o.waypoint=new q.default({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}}),o}return(0,s.Z)(r)}(U.wq);(0,c._)([(0,N.Cb)({types:G.LB})],z.prototype,"break",void 0),(0,c._)([(0,N.Cb)({types:G.LB})],z.prototype,"first",void 0),(0,c._)([(0,N.Cb)({types:G.LB})],z.prototype,"unlocated",void 0),(0,c._)([(0,N.Cb)({types:G.LB})],z.prototype,"last",void 0),(0,c._)([(0,N.Cb)({types:G.LB})],z.prototype,"middle",void 0),(0,c._)([(0,N.Cb)({types:G.LB})],z.prototype,"waypoint",void 0);var V=z=(0,c._)([(0,L.j)("esri.layers.support.RouteStopSymbols")],z),K=r(16851),$=r(61459),Q=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).directionLines=new K.default({color:[0,122,194],width:6}),o.directionPoints=new q.default({color:[255,255,255],size:6,outline:{color:[0,122,194],width:2}}),o.pointBarriers=new q.default({style:"x",size:10,outline:{color:[255,0,0],width:3}}),o.polygonBarriers=new $.default({color:[255,170,0,.6],outline:{width:7.5,color:[255,0,0,.6]}}),o.polylineBarriers=new K.default({width:7.5,color:[255,85,0,.7]}),o.routeInfo=new K.default({width:8,color:[20,89,127]}),o.stops=new V,o}return(0,s.Z)(r)}(U.wq);(0,c._)([(0,N.Cb)({types:G.LB})],Q.prototype,"directionLines",void 0),(0,c._)([(0,N.Cb)({types:G.LB})],Q.prototype,"directionPoints",void 0),(0,c._)([(0,N.Cb)({types:G.LB})],Q.prototype,"pointBarriers",void 0),(0,c._)([(0,N.Cb)({types:G.LB})],Q.prototype,"polygonBarriers",void 0),(0,c._)([(0,N.Cb)({types:G.LB})],Q.prototype,"polylineBarriers",void 0),(0,c._)([(0,N.Cb)({types:G.LB})],Q.prototype,"routeInfo",void 0),(0,c._)([(0,N.Cb)({type:V})],Q.prototype,"stops",void 0);var X=Q=(0,c._)([(0,L.j)("esri.layers.support.RouteSymbols")],Q),Y=r(70032),H=r(98995),ee=r(73117),te=r(76200),re=r(23084),oe=r(27135),ne=r(49022),ie=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).dataType=null,o.name=null,o.parameterNames=null,o.restrictionUsageParameterName=null,o.timeNeutralAttributeName=null,o.trafficSupport=null,o.units=null,o.usageType=null,o}return(0,s.Z)(r)}(U.wq);(0,c._)([(0,N.Cb)({type:String})],ie.prototype,"dataType",void 0),(0,c._)([(0,oe.J)(ne.Ul,{ignoreUnknown:!1})],ie.prototype,"name",void 0),(0,c._)([(0,N.Cb)({type:[String]})],ie.prototype,"parameterNames",void 0),(0,c._)([(0,N.Cb)({type:String})],ie.prototype,"restrictionUsageParameterName",void 0),(0,c._)([(0,oe.J)(ne.ZI,{ignoreUnknown:!1})],ie.prototype,"timeNeutralAttributeName",void 0),(0,c._)([(0,N.Cb)({type:String})],ie.prototype,"trafficSupport",void 0),(0,c._)([(0,N.Cb)({type:String})],ie.prototype,"units",void 0),(0,c._)([(0,oe.J)(ne.E2)],ie.prototype,"usageType",void 0);var se=ie=(0,c._)([(0,L.j)("esri.rest.support.NetworkAttribute")],ie),ae=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).buildTime=null,o.name=null,o.networkAttributes=null,o.networkSources=null,o.state=null,o}return(0,s.Z)(r)}(U.wq);(0,c._)([(0,N.Cb)({type:Number})],ae.prototype,"buildTime",void 0),(0,c._)([(0,N.Cb)({type:String})],ae.prototype,"name",void 0),(0,c._)([(0,N.Cb)({type:[se]})],ae.prototype,"networkAttributes",void 0),(0,c._)([(0,N.Cb)()],ae.prototype,"networkSources",void 0),(0,c._)([(0,N.Cb)({type:String})],ae.prototype,"state",void 0);var le=ae=(0,c._)([(0,L.j)("esri.rest.support.NetworkDataset")],ae),ue=r(77279),pe=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).accumulateAttributeNames=null,o.currentVersion=null,o.defaultTravelMode=null,o.directionsLanguage=null,o.directionsLengthUnits=null,o.directionsSupportedLanguages=null,o.directionsTimeAttribute=null,o.hasZ=null,o.impedance=null,o.networkDataset=null,o.supportedTravelModes=null,o}return(0,s.Z)(r,[{key:"readAccumulateAttributes",value:function(e){return(0,_.Wi)(e)?null:e.map((function(e){return ne.Ul.fromJSON(e)}))}},{key:"writeAccumulateAttributes",value:function(e,t,r){!(0,_.Wi)(e)&&e.length&&(t[r]=e.map((function(e){return ne.Ul.toJSON(e)})))}}]),r}(U.wq);(0,c._)([(0,N.Cb)()],pe.prototype,"accumulateAttributeNames",void 0),(0,c._)([(0,A.r)("accumulateAttributeNames")],pe.prototype,"readAccumulateAttributes",null),(0,c._)([(0,I.c)("accumulateAttributeNames")],pe.prototype,"writeAccumulateAttributes",null),(0,c._)([(0,N.Cb)()],pe.prototype,"currentVersion",void 0),(0,c._)([(0,N.Cb)()],pe.prototype,"defaultTravelMode",void 0),(0,c._)([(0,N.Cb)()],pe.prototype,"directionsLanguage",void 0),(0,c._)([(0,oe.J)(ne.GX)],pe.prototype,"directionsLengthUnits",void 0),(0,c._)([(0,N.Cb)()],pe.prototype,"directionsSupportedLanguages",void 0),(0,c._)([(0,oe.J)(ne.ZI,{ignoreUnknown:!1})],pe.prototype,"directionsTimeAttribute",void 0),(0,c._)([(0,N.Cb)()],pe.prototype,"hasZ",void 0),(0,c._)([(0,oe.J)(ne.Ul,{ignoreUnknown:!1})],pe.prototype,"impedance",void 0),(0,c._)([(0,N.Cb)({type:le})],pe.prototype,"networkDataset",void 0),(0,c._)([(0,N.Cb)({type:[ue.Z]})],pe.prototype,"supportedTravelModes",void 0);var ce=pe=(0,c._)([(0,L.j)("esri.rest.support.NetworkServiceDescription")],pe);function ye(e,t,r,o){o[r]=[t.length,t.length+e.length],e.forEach((function(e){t.push(e.geometry)}))}function de(e,t){for(var r=0;r<t.length;r++){var o=e[t[r]];if(o&&o.length){var n,i=(0,p.Z)(o);try{for(i.s();!(n=i.n()).done;){n.value.z=void 0}}catch(s){i.e(s)}finally{i.f()}}}console.log("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}function fe(e,t){for(var r=0;r<t.length;r++){var o=e[t[r]];if(o&&o.length){var n,i=(0,p.Z)(o);try{for(i.s();!(n=i.n()).done;){var s=n.value;if((0,_.pC)(s)&&s.hasZ)return!0}}catch(a){i.e(a)}finally{i.f()}}}return!1}function ve(e,t,r){return me.apply(this,arguments)}function me(){return me=(0,u.Z)((0,n.Z)().mark((function e(t,r,o){var i,s,a,l,u,p,c,y;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new b.Z("network-service:missing-url","Url to Network service is missing");case 2:return i=(0,re.lA)({f:"json",token:r},o),e.next=5,(0,te.default)(t,i);case 5:for(s=e.sent,(a=s.data).supportedTravelModes||(a.supportedTravelModes=[]),l=0;l<a.supportedTravelModes.length;l++)a.supportedTravelModes[l].id||(a.supportedTravelModes[l].id=a.supportedTravelModes[l].itemId);return u=a.currentVersion>=10.4?we(t,r,o):he(t,o),e.next=12,u;case 12:return p=e.sent,c=p.defaultTravelMode,y=p.supportedTravelModes,e.abrupt("return",(a.defaultTravelMode=c,a.supportedTravelModes=y,ce.fromJSON(a)));case 16:case"end":return e.stop()}}),e)}))),me.apply(this,arguments)}function he(e,t){return be.apply(this,arguments)}function be(){return be=(0,u.Z)((0,n.Z)().mark((function e(t,r){var o,i,s,a,l,u,c,y,d,f,v,m,h,b,w,g,_,Z,C,B,T,N,P,A,L,I;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=(0,re.lA)({f:"json"},r),e.next=3,(0,te.default)(t.replace(/\/rest\/.*$/i,"/info"),s);case 3:if(a=e.sent,(l=a.data)&&l.owningSystemUrl){e.next=7;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 7:return u=l.owningSystemUrl,c=(0,k.Qj)(u)+"/sharing/rest/portals/self",e.next=11,(0,te.default)(c,s);case 11:if(y=e.sent,d=y.data,f=(0,S.hS)("helperServices.routingUtilities.url",d)){e.next=16;break}return e.abrupt("return",{supportedTravelModes:[],defaultTravelMode:null});case 16:return v=(0,re.en)(u),m=/\/solve$/i.test(v.path)?"Route":/\/solveclosestfacility$/i.test(v.path)?"ClosestFacility":"ServiceAreas",h=(0,re.lA)({f:"json",serviceName:m},r),b=(0,k.Qj)(f)+"/GetTravelModes/execute",e.next=22,(0,te.default)(b,h);case 22:if(w=e.sent,g=[],_=null,null!==w&&void 0!==w&&null!==(o=w.data)&&void 0!==o&&null!==(i=o.results)&&void 0!==i&&i.length){Z=w.data.results,C=(0,p.Z)(Z);try{for(C.s();!(B=C.n()).done;)if("supportedTravelModes"===(T=B.value).paramName){if(null!==(N=T.value)&&void 0!==N&&N.features){P=(0,p.Z)(T.value.features);try{for(P.s();!(A=P.n()).done;)(L=A.value.attributes)&&(I=JSON.parse(L.TravelMode),g.push(I))}catch(n){P.e(n)}finally{P.f()}}}else"defaultTravelMode"===T.paramName&&(_=T.value)}catch(n){C.e(n)}finally{C.f()}}return e.abrupt("return",{supportedTravelModes:g,defaultTravelMode:_});case 27:case"end":return e.stop()}}),e)}))),be.apply(this,arguments)}function we(e,t,r){return ge.apply(this,arguments)}function ge(){return ge=(0,u.Z)((0,n.Z)().mark((function e(t,r,o){var i,s,a,l,u,p;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=(0,re.lA)({f:"json",token:r},o),s=(0,k.Qj)(t)+"/retrieveTravelModes",e.next=5,(0,te.default)(s,i);case 5:return a=e.sent,l=a.data,u=l.supportedTravelModes,p=l.defaultTravelMode,e.abrupt("return",{supportedTravelModes:u,defaultTravelMode:p});case 12:throw e.prev=12,e.t0=e.catch(0),new b.Z("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:e.t0});case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),ge.apply(this,arguments)}var _e=r(1413),Ze=r(50689),Se=r(3321),Ce=r(49818),Be=r(43404),Te=new Be.X({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"}),ke=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).description=null,o.type=null,o}return(0,s.Z)(r)}(U.wq);(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],ke.prototype,"description",void 0),(0,c._)([(0,N.Cb)({type:String,json:{read:Te.read,write:Te.write}})],ke.prototype,"type",void 0);var Ne=ke=(0,c._)([(0,L.j)("esri.rest.support.GPMessage")],ke),Pe=new Be.X({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"}),Ae=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).type=null,o}return(0,s.Z)(r)}(Ne);(0,c._)([(0,N.Cb)({type:String,json:{read:Pe.read,write:Pe.write}})],Ae.prototype,"type",void 0);var Le=Ae=(0,c._)([(0,L.j)("esri.rest.support.NAMessage")],Ae),Ie=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r)}(f.Z);(0,c._)([(0,N.Cb)()],Ie.prototype,"events",void 0),(0,c._)([(0,N.Cb)()],Ie.prototype,"strings",void 0);var Re=Ie=(0,c._)([(0,L.j)("esri.rest.support.DirectionsFeature")],Ie),je=r(78952),xe=r(29909),Oe=r(7882),Je=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).extent=null,o.features=null,o.geometryType="polyline",o.routeId=null,o.routeName=null,o.totalDriveTime=null,o.totalLength=null,o.totalTime=null,o}return(0,s.Z)(r,[{key:"readFeatures",value:function(e,t){var r,o=this;if(!e)return[];var n=null!==(r=t.summary.envelope.spatialReference)&&void 0!==r?r:t.spatialReference,i=n&&je.Z.fromJSON(n);return e.map((function(e){var t,r,n=o._decompressGeometry(e.compressedGeometry),s=new xe.Z((0,_e.Z)((0,_e.Z)({},n),{},{spatialReference:i})),a=null!==(t=null===(r=e.events)||void 0===r?void 0:r.map((function(e){var t=e.arriveTimeUTC,r=e.ETA,o=e.point,n=o.x,s=o.y,a=o.z,l=e.strings;return new Re({geometry:new Oe.Z({x:n,y:s,z:a,hasZ:void 0!==a,spatialReference:i}),attributes:{ETA:r,arriveTimeUTC:t},strings:l})})))&&void 0!==t?t:[];return new Re({attributes:e.attributes,events:a,geometry:s,strings:e.strings})}))}},{key:"mergedGeometry",get:function(){if(!this.features)return null;var e=this.features.map((function(e){var t=e.geometry;return(0,_.Wg)(t)})),t=this.get("extent.spatialReference");return this._mergePolylinesToSinglePath(e,t)}},{key:"strings",get:function(){return this.features.map((function(e){return e.strings}))}},{key:"_decompressGeometry",value:function(e){var t,r,o,n,i,s,a,l,u=0,p=0,c=0,y=0,d=[],f=0,v=0,m=0;if((i=e.match(/((\+|\-)[^\+\-\|]+|\|)/g))||(i=[]),0===parseInt(i[f],32)){f=2;var h=parseInt(i[f],32);f++,s=parseInt(i[f],32),f++,1&h&&(v=i.indexOf("|")+1,a=parseInt(i[v],32),v++),2&h&&(m=i.indexOf("|",v)+1,l=parseInt(i[m],32),m++)}else s=parseInt(i[f],32),f++;for(;f<i.length&&"|"!==i[f];){t=parseInt(i[f],32)+u,f++,u=t,r=parseInt(i[f],32)+p,f++,p=r;var b=[t/s,r/s];v&&(n=parseInt(i[v],32)+c,v++,c=n,b.push(n/a)),m&&(o=parseInt(i[m],32)+y,m++,y=o,b.push(o/l)),d.push(b)}return{paths:[d],hasZ:v>0,hasM:m>0}}},{key:"_mergePolylinesToSinglePath",value:function(e,t){if(0===e.length)return new xe.Z({spatialReference:t});var r,n=[],i=(0,p.Z)(e);try{for(i.s();!(r=i.n()).done;){var s,a=r.value,l=(0,p.Z)(a.paths);try{for(l.s();!(s=l.n()).done;){var u=s.value;n.push.apply(n,(0,o.Z)(u))}}catch(v){l.e(v)}finally{l.f()}}}catch(v){i.e(v)}finally{i.f()}var c=[];n.forEach((function(e,t){0!==t&&e[0]===n[t-1][0]&&e[1]===n[t-1][1]||c.push(e)}));var y=e[0],d=y.hasM,f=y.hasZ;return new xe.Z({hasM:d,hasZ:f,paths:[c],spatialReference:t})}}]),r}(Ce.default);(0,c._)([(0,N.Cb)({type:j.Z,json:{read:{source:"summary.envelope"}}})],Je.prototype,"extent",void 0),(0,c._)([(0,N.Cb)()],Je.prototype,"features",void 0),(0,c._)([(0,A.r)("features")],Je.prototype,"readFeatures",null),(0,c._)([(0,N.Cb)()],Je.prototype,"geometryType",void 0),(0,c._)([(0,N.Cb)({readOnly:!0})],Je.prototype,"mergedGeometry",null),(0,c._)([(0,N.Cb)()],Je.prototype,"routeId",void 0),(0,c._)([(0,N.Cb)()],Je.prototype,"routeName",void 0),(0,c._)([(0,N.Cb)({value:null,readOnly:!0})],Je.prototype,"strings",null),(0,c._)([(0,N.Cb)({json:{read:{source:"summary.totalDriveTime"}}})],Je.prototype,"totalDriveTime",void 0),(0,c._)([(0,N.Cb)({json:{read:{source:"summary.totalLength"}}})],Je.prototype,"totalLength",void 0),(0,c._)([(0,N.Cb)({json:{read:{source:"summary.totalTime"}}})],Je.prototype,"totalTime",void 0);var De=Je=(0,c._)([(0,L.j)("esri.rest.support.DirectionsFeatureSet")],Je),Me=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).directionLines=null,o.directionPoints=null,o.directions=null,o.route=null,o.routeName=null,o.stops=null,o.traversedEdges=null,o.traversedJunctions=null,o.traversedTurns=null,o}return(0,s.Z)(r)}(U.wq);(0,c._)([(0,N.Cb)({type:Ce.default,json:{write:!0}})],Me.prototype,"directionLines",void 0),(0,c._)([(0,N.Cb)({type:Ce.default,json:{write:!0}})],Me.prototype,"directionPoints",void 0),(0,c._)([(0,N.Cb)({type:De,json:{write:!0}})],Me.prototype,"directions",void 0),(0,c._)([(0,N.Cb)({type:f.Z,json:{write:!0}})],Me.prototype,"route",void 0),(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],Me.prototype,"routeName",void 0),(0,c._)([(0,N.Cb)({type:[f.Z],json:{write:!0}})],Me.prototype,"stops",void 0),(0,c._)([(0,N.Cb)({type:Ce.default,json:{write:!0}})],Me.prototype,"traversedEdges",void 0),(0,c._)([(0,N.Cb)({type:Ce.default,json:{write:!0}})],Me.prototype,"traversedJunctions",void 0),(0,c._)([(0,N.Cb)({type:Ce.default,json:{write:!0}})],Me.prototype,"traversedTurns",void 0);var Ee=Me=(0,c._)([(0,L.j)("esri.rest.support.RouteResult")],Me);function Fe(e){return e&&Ce.default.fromJSON(e).features.map((function(e){return e}))}var We=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).messages=null,o.pointBarriers=null,o.polylineBarriers=null,o.polygonBarriers=null,o.routeResults=null,o}return(0,s.Z)(r,[{key:"readPointBarriers",value:function(e,t){return Fe(t.barriers)}},{key:"readPolylineBarriers",value:function(e){return Fe(e)}},{key:"readPolygonBarriers",value:function(e){return Fe(e)}}]),r}(U.wq);(0,c._)([(0,N.Cb)({type:[Le]})],We.prototype,"messages",void 0),(0,c._)([(0,N.Cb)({type:[f.Z]})],We.prototype,"pointBarriers",void 0),(0,c._)([(0,A.r)("pointBarriers",["barriers"])],We.prototype,"readPointBarriers",null),(0,c._)([(0,N.Cb)({type:[f.Z]})],We.prototype,"polylineBarriers",void 0),(0,c._)([(0,A.r)("polylineBarriers")],We.prototype,"readPolylineBarriers",null),(0,c._)([(0,N.Cb)({type:[f.Z]})],We.prototype,"polygonBarriers",void 0),(0,c._)([(0,A.r)("polygonBarriers")],We.prototype,"readPolygonBarriers",null),(0,c._)([(0,N.Cb)({type:[Ee]})],We.prototype,"routeResults",void 0);var Ge=We=(0,c._)([(0,L.j)("esri.rest.support.RouteSolveResult")],We);function Ue(e){return"esri.rest.support.FeatureSet"===(null===e||void 0===e?void 0:e.declaredClass)}function qe(e,t,r){return ze.apply(this,arguments)}function ze(){return ze=(0,u.Z)((0,n.Z)().mark((function e(t,r,o){var i,s,a,l,u,p,c,y,d,f,v,m,h,b,w,g;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[],s=[],a={},l={},u=(0,re.en)(t),p=u.path,Ue(r.stops)&&ye(r.stops.features,s,"stops.features",a),Ue(r.pointBarriers)&&ye(r.pointBarriers.features,s,"pointBarriers.features",a),Ue(r.polylineBarriers)&&ye(r.polylineBarriers.features,s,"polylineBarriers.features",a),Ue(r.polygonBarriers)&&ye(r.polygonBarriers.features,s,"polygonBarriers.features",a),e.next=4,(0,Ze.aX)(s);case 4:for(y in c=e.sent,a)d=a[y],i.push(y),l[y]=c.slice(d[0],d[1]);if(!fe(l,i)){e.next=17;break}return f=null,e.prev=8,e.next=11,ve(p,r.apiKey,o);case 11:f=e.sent,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(8);case 16:f&&!f.hasZ&&de(l,i);case 17:for(m in v=function(e){l[e].forEach((function(t,o){r.get(e)[o].geometry=t}))},l)v(m);return h=(0,_e.Z)((0,_e.Z)({},o),{},{query:(0,_e.Z)((0,_e.Z)((0,_e.Z)({},u.query),(0,Se.Yc)(r)),{},{f:"json"})}),b=p.endsWith("/solve")?p:"".concat(p,"/solve"),e.next=23,(0,te.default)(b,h);case 23:return w=e.sent,g=w.data,e.abrupt("return",Ve(g));case 26:case"end":return e.stop()}}),e,null,[[8,14]])}))),ze.apply(this,arguments)}function Ve(e){var t,r=e.barriers,o=e.directionLines,n=e.directionPoints,i=e.directions,s=e.messages,a=e.polygonBarriers,l=e.polylineBarriers,u=e.routes,p=e.stops,c=e.traversedEdges,y=e.traversedJunctions,d=e.traversedTurns,f=function(e){var t=m.find((function(t){return t.routeName===e}));if((0,_.pC)(t))return t;var r={routeId:m.length+1,routeName:e};return m.push(r),r},v=function(e){var t=m.find((function(t){return t.routeId===e}));if((0,_.pC)(t))return t;var r={routeId:e,routeName:null};return m.push(r),r},m=[];null!==u&&void 0!==u&&u.features.forEach((function(e,t){e.geometry.spatialReference=u.spatialReference;var r=e.attributes.Name,o=t+1;m.push({routeId:o,routeName:r,route:e})})),null===i||void 0===i||i.forEach((function(e){var t=e.routeName;f(t).directions=e}));var h=null!==(t=null===p||void 0===p?void 0:p.features.every((function(e){return(0,_.Wi)(e.attributes.RouteName)})))&&void 0!==t&&t&&m.length>0?m[0].routeName:null;return null!==p&&void 0!==p&&p.features.forEach((function(e){var t,r,o;e.geometry&&(null!==(t=(o=e.geometry).spatialReference)&&void 0!==t||(o.spatialReference=p.spatialReference));var n=null!==h&&void 0!==h?h:e.attributes.RouteName,i=f(n);null!==(r=i.stops)&&void 0!==r||(i.stops=[]),i.stops.push(e)})),null!==o&&void 0!==o&&o.features.forEach((function(e){var t,r=e.attributes.RouteID,n=v(r),i=o.geometryType,s=o.spatialReference;null!==(t=n.directionLines)&&void 0!==t||(n.directionLines={features:[],geometryType:i,spatialReference:s}),n.directionLines.features.push(e)})),null!==n&&void 0!==n&&n.features.forEach((function(e){var t,r=e.attributes.RouteID,o=v(r),i=n.geometryType,s=n.spatialReference;null!==(t=o.directionPoints)&&void 0!==t||(o.directionPoints={features:[],geometryType:i,spatialReference:s}),o.directionPoints.features.push(e)})),null!==c&&void 0!==c&&c.features.forEach((function(e){var t,r=e.attributes.RouteID,o=v(r),n=c.geometryType,i=c.spatialReference;null!==(t=o.traversedEdges)&&void 0!==t||(o.traversedEdges={features:[],geometryType:n,spatialReference:i}),o.traversedEdges.features.push(e)})),null!==y&&void 0!==y&&y.features.forEach((function(e){var t,r=e.attributes.RouteID,o=v(r),n=y.geometryType,i=y.spatialReference;null!==(t=o.traversedJunctions)&&void 0!==t||(o.traversedJunctions={features:[],geometryType:n,spatialReference:i}),o.traversedJunctions.features.push(e)})),null!==d&&void 0!==d&&d.features.forEach((function(e){var t,r=e.attributes.RouteID,o=v(r);null!==(t=o.traversedTurns)&&void 0!==t||(o.traversedTurns={features:[]}),o.traversedTurns.features.push(e)})),Ge.fromJSON({routeResults:m,barriers:r,polygonBarriers:a,polylineBarriers:l,messages:s})}var Ke=r(40653),$e=r(54889),Qe=r(16406),Xe=r(44745),Ye=r(21604),He=r(99821),et=r(11582),tt={type:String,json:{read:{source:"token"},write:{target:"token"}}},rt=r(77981),ot=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).doNotLocateOnRestrictedElements=null,o.geometry=null,o.geometryType=null,o.name=null,o.spatialRelationship=null,o.type="layer",o.where=null,o}return(0,s.Z)(r)}((0,et.J)(U.wq));(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],ot.prototype,"doNotLocateOnRestrictedElements",void 0),(0,c._)([(0,N.Cb)({types:d.qM,json:{read:rt.im,write:!0}})],ot.prototype,"geometry",void 0),(0,c._)([(0,oe.J)(ne.KA)],ot.prototype,"geometryType",void 0),(0,c._)([(0,N.Cb)({type:String,json:{name:"layerName",write:!0}})],ot.prototype,"name",void 0),(0,c._)([(0,oe.J)(ne.S7,{name:"spatialRel"})],ot.prototype,"spatialRelationship",void 0),(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],ot.prototype,"type",void 0),(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],ot.prototype,"where",void 0);var nt,it=ot=(0,c._)([(0,L.j)("esri.rest.support.DataLayer")],ot),st=nt=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).doNotLocateOnRestrictedElements=null,o}return(0,s.Z)(r,[{key:"clone",value:function(){return new nt((0,_e.Z)({doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements},this.cloneProperties()))}}]),r}(Ce.default);(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],st.prototype,"doNotLocateOnRestrictedElements",void 0);var at=st=nt=(0,c._)([(0,L.j)("esri.rest.support.NetworkFeatureSet")],st),lt=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).doNotLocateOnRestrictedElements=null,o.url=null,o}return(0,s.Z)(r)}((0,et.J)(U.wq));(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],lt.prototype,"doNotLocateOnRestrictedElements",void 0),(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],lt.prototype,"url",void 0);var ut,pt=lt=(0,c._)([(0,L.j)("esri.rest.support.NetworkUrl")],lt);function ct(e,t,r){(0,_.pC)(e)&&(t[r]=h.Z.isCollection(e)?{features:e.toArray().map((function(e){return e.toJSON()}))}:e.toJSON())}var yt=ut=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var o;return(0,i.Z)(this,r),(o=t.call(this,e)).accumulateAttributes=null,o.apiKey=null,o.attributeParameterValues=null,o.directionsLanguage=null,o.directionsLengthUnits=null,o.directionsOutputType=null,o.directionsStyleName=null,o.directionsTimeAttribute=null,o.findBestSequence=null,o.geometryPrecision=null,o.geometryPrecisionM=null,o.geometryPrecisionZ=null,o.ignoreInvalidLocations=null,o.impedanceAttribute=null,o.outputGeometryPrecision=null,o.outputGeometryPrecisionUnits=null,o.outputLines="true-shape",o.outSpatialReference=null,o.overrides=null,o.pointBarriers=null,o.polygonBarriers=null,o.polylineBarriers=null,o.preserveFirstStop=null,o.preserveLastStop=null,o.preserveObjectID=null,o.restrictionAttributes=null,o.restrictUTurns=null,o.returnBarriers=!1,o.returnDirections=!1,o.returnPolygonBarriers=!1,o.returnPolylineBarriers=!1,o.returnRoutes=!0,o.returnStops=!1,o.returnTraversedEdges=null,o.returnTraversedJunctions=null,o.returnTraversedTurns=null,o.returnZ=!0,o.startTime=null,o.startTimeIsUTC=!0,o.stops=null,o.timeWindowsAreUTC=null,o.travelMode=null,o.useHierarchy=null,o.useTimeWindows=null,o}return(0,s.Z)(r,[{key:"readAccumulateAttributes",value:function(e){return(0,_.Wi)(e)?null:e.map((function(e){return ne.Ul.fromJSON(e)}))}},{key:"writeAccumulateAttributes",value:function(e,t,r){!(0,_.Wi)(e)&&e.length&&(t[r]=e.map((function(e){return ne.Ul.toJSON(e)})))}},{key:"writePointBarriers",value:function(e,t,r){ct(e,t,r)}},{key:"writePolygonBarrier",value:function(e,t,r){ct(e,t,r)}},{key:"writePolylineBarrier",value:function(e,t,r){ct(e,t,r)}},{key:"readRestrictionAttributes",value:function(e){return(0,_.Wi)(e)?null:e.map((function(e){return ne.kL.fromJSON(e)}))}},{key:"writeRestrictionAttributes",value:function(e,t,r){!(0,_.Wi)(e)&&e.length&&(t[r]=e.map((function(e){return ne.kL.toJSON(e)})))}},{key:"readStartTime",value:function(e,t){var r=t.startTime;return(0,_.Wi)(r)?null:"now"===r?"now":new Date(r)}},{key:"writeStartTime",value:function(e,t){(0,_.Wi)(e)||(t.startTime="now"===e?"now":e.getTime())}},{key:"readStops",value:function(e,t){return function(e){return function(e){return e&&"type"in e}(e)?it.fromJSON(e):function(e){return e&&"url"in e}(e)?pt.fromJSON(e):function(e){return e&&"features"in e&&"doNotLocateOnRestrictedElements"in e}(e)?at.fromJSON(e):function(e){return e&&"features"in e}(e)?Ce.default.fromJSON(e):null}(t.stops)}},{key:"writeStops",value:function(e,t,r){ct(e,t,r)}}],[{key:"from",value:function(e){return(0,P.TJ)(ut,e)}}]),r}((0,et.J)(U.wq));(0,c._)([(0,N.Cb)({type:[String],json:{name:"accumulateAttributeNames",write:!0}})],yt.prototype,"accumulateAttributes",void 0),(0,c._)([(0,A.r)("accumulateAttributes")],yt.prototype,"readAccumulateAttributes",null),(0,c._)([(0,I.c)("accumulateAttributes")],yt.prototype,"writeAccumulateAttributes",null),(0,c._)([(0,N.Cb)(tt)],yt.prototype,"apiKey",void 0),(0,c._)([(0,N.Cb)({json:{write:!0}})],yt.prototype,"attributeParameterValues",void 0),(0,c._)([(0,N.Cb)({type:String,json:{write:!0}})],yt.prototype,"directionsLanguage",void 0),(0,c._)([(0,oe.J)(ne.GX)],yt.prototype,"directionsLengthUnits",void 0),(0,c._)([(0,oe.J)(ne.$7)],yt.prototype,"directionsOutputType",void 0),(0,c._)([(0,oe.J)(ne.WP)],yt.prototype,"directionsStyleName",void 0),(0,c._)([(0,oe.J)(ne.ZI,{name:"directionsTimeAttributeName",ignoreUnknown:!1})],yt.prototype,"directionsTimeAttribute",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"findBestSequence",void 0),(0,c._)([(0,N.Cb)({type:Number,json:{write:!0}})],yt.prototype,"geometryPrecision",void 0),(0,c._)([(0,N.Cb)({type:Number,json:{write:!0}})],yt.prototype,"geometryPrecisionM",void 0),(0,c._)([(0,N.Cb)({type:Number,json:{write:!0}})],yt.prototype,"geometryPrecisionZ",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"ignoreInvalidLocations",void 0),(0,c._)([(0,oe.J)(ne.Ul,{name:"impedanceAttributeName",ignoreUnknown:!1})],yt.prototype,"impedanceAttribute",void 0),(0,c._)([(0,N.Cb)({type:Number,json:{write:!0}})],yt.prototype,"outputGeometryPrecision",void 0),(0,c._)([(0,oe.J)(ne.q$)],yt.prototype,"outputGeometryPrecisionUnits",void 0),(0,c._)([(0,oe.J)(ne.no)],yt.prototype,"outputLines",void 0),(0,c._)([(0,N.Cb)({type:je.Z,json:{name:"outSR",write:!0}})],yt.prototype,"outSpatialReference",void 0),(0,c._)([(0,N.Cb)({json:{write:!0}})],yt.prototype,"overrides",void 0),(0,c._)([(0,N.Cb)({json:{name:"barriers",write:!0}})],yt.prototype,"pointBarriers",void 0),(0,c._)([(0,I.c)("pointBarriers")],yt.prototype,"writePointBarriers",null),(0,c._)([(0,N.Cb)({json:{write:!0}})],yt.prototype,"polygonBarriers",void 0),(0,c._)([(0,I.c)("polygonBarriers")],yt.prototype,"writePolygonBarrier",null),(0,c._)([(0,N.Cb)({json:{write:!0}})],yt.prototype,"polylineBarriers",void 0),(0,c._)([(0,I.c)("polylineBarriers")],yt.prototype,"writePolylineBarrier",null),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"preserveFirstStop",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"preserveLastStop",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"preserveObjectID",void 0),(0,c._)([(0,N.Cb)({type:[String],json:{name:"restrictionAttributeNames",write:!0}})],yt.prototype,"restrictionAttributes",void 0),(0,c._)([(0,A.r)("restrictionAttributes")],yt.prototype,"readRestrictionAttributes",null),(0,c._)([(0,I.c)("restrictionAttributes")],yt.prototype,"writeRestrictionAttributes",null),(0,c._)([(0,oe.J)(ne.ip)],yt.prototype,"restrictUTurns",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"returnBarriers",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"returnDirections",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"returnPolygonBarriers",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"returnPolylineBarriers",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"returnRoutes",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"returnStops",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"returnTraversedEdges",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"returnTraversedJunctions",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"returnTraversedTurns",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"returnZ",void 0),(0,c._)([(0,N.Cb)({type:Date,json:{type:Number,write:!0}})],yt.prototype,"startTime",void 0),(0,c._)([(0,A.r)("startTime")],yt.prototype,"readStartTime",null),(0,c._)([(0,I.c)("startTime")],yt.prototype,"writeStartTime",null),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"startTimeIsUTC",void 0),(0,c._)([(0,N.Cb)({json:{write:!0}})],yt.prototype,"stops",void 0),(0,c._)([(0,A.r)("stops")],yt.prototype,"readStops",null),(0,c._)([(0,I.c)("stops")],yt.prototype,"writeStops",null),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"timeWindowsAreUTC",void 0),(0,c._)([(0,N.Cb)({type:ue.Z,json:{write:!0}})],yt.prototype,"travelMode",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"useHierarchy",void 0),(0,c._)([(0,N.Cb)({type:Boolean,json:{write:!0}})],yt.prototype,"useTimeWindows",void 0);var dt=yt=ut=(0,c._)([(0,L.j)("esri.rest.support.RouteParameters")],yt),ft=r(37321),vt=r(70491),mt=r(77577);function ht(e){return e.length?e:null}function bt(e){var t=e.defaultTravelMode;return e.supportedTravelModes.find((function(e){return e.id===t}))}function wt(e){switch(e){case"esriGeometryPoint":return{type:"esriSMS",style:"esriSMSCircle",size:12,color:[0,0,0,0],outline:wt("esriGeometryPolyline")};case"esriGeometryPolyline":return{type:"esriSLS",style:"esriSLSSolid",width:1,color:[0,0,0,0]};case"esriGeometryPolygon":return{type:"esriSFS",style:"esriSFSNull",outline:wt("esriGeometryPolyline")}}}function gt(e){return"layers"in e}function _t(e){return"esri.rest.support.FeatureSet"===e.declaredClass}function Zt(e){return"esri.rest.support.NetworkFeatureSet"===e.declaredClass}function St(e,t,r){var o,n,i,s,a,l,u,c,y,d,f,v=t.networkDataset.networkAttributes.filter((function(e){return"cost"===e.usageType})),m=bt(t),h=null!==(o=r.travelMode)&&void 0!==o?o:m;if((0,_.Wi)(h))jt.warn("route-layer:missing-travel-mode","The routing service must have a default travel mode or one must be specified in the route parameter.");else{var w=h.timeAttributeName,g=h.distanceAttributeName,Z=v.find((function(e){return e.name===w})),S=v.find((function(e){return e.name===g})),C=null!==(n=null!==(i=null===(s=(0,_.Wg)(r.travelMode))||void 0===s?void 0:s.impedanceAttributeName)&&void 0!==i?i:(0,_.Wg)(r.impedanceAttribute))&&void 0!==n?n:t.impedance,B=ne.hB.fromJSON(null===Z||void 0===Z?void 0:Z.units),T=ne.GX.fromJSON(null===S||void 0===S?void 0:S.units);if(!B||!T)throw new b.Z("routelayer:unknown-impedance-units","the units of either the distance or time impedance are unknown");var k,N=null!==(a=r.directionsLanguage)&&void 0!==a?a:t.directionsLanguage,P=null!==(l=null!==(u=(0,_.Wg)(r.accumulateAttributes))&&void 0!==u?u:t.accumulateAttributeNames)&&void 0!==l?l:[],A=new Set(v.filter((function(e){var t=e.name;return t===w||t===g||t===C||P.includes(t)})).map((function(e){return e.name}))),L=function(e){for(var t in e)A.has(t)||delete e[t]},I=(0,p.Z)(e.pointBarriers);try{for(I.s();!(k=I.n()).done;){var R,j=k.value;(0,_.pC)(j.costs)&&(j.addedCost=null!==(R=j.costs[C])&&void 0!==R?R:0,L(j.costs))}}catch(ie){I.e(ie)}finally{I.f()}var x,O=(0,p.Z)(e.polygonBarriers);try{for(O.s();!(x=O.n()).done;){var J,D=x.value;(0,_.pC)(D.costs)&&(D.scaleFactor=null!==(J=D.costs[C])&&void 0!==J?J:1,L(D.costs))}}catch(ie){O.e(ie)}finally{O.f()}var M,E=(0,p.Z)(e.polylineBarriers);try{for(E.s();!(M=E.n()).done;){var F,W=M.value;(0,_.pC)(W.costs)&&(W.scaleFactor=null!==(F=W.costs[C])&&void 0!==F?F:1,L(W.costs))}}catch(ie){E.e(ie)}finally{E.f()}var G=e.routeInfo,U=r.findBestSequence,q=r.preserveFirstStop,z=r.preserveLastStop,V=r.startTimeIsUTC,K=r.timeWindowsAreUTC;G.analysisSettings=new ft.Z({accumulateAttributes:P,directionsLanguage:N,findBestSequence:U,preserveFirstStop:q,preserveLastStop:z,startTimeIsUTC:V,timeWindowsAreUTC:K,travelMode:h}),G.totalDuration=Tt(null!==(c=G.totalCosts[w])&&void 0!==c?c:0,B),G.totalDistance=kt(null!==(y=G.totalCosts[g])&&void 0!==y?y:0,T),G.totalLateDuration=Tt(null!==(d=G.totalViolations[w])&&void 0!==d?d:0,B),G.totalWaitDuration=Tt(null!==(f=G.totalWait[w])&&void 0!==f?f:0,B),(0,_.pC)(G.totalCosts)&&L(G.totalCosts),(0,_.pC)(G.totalViolations)&&L(G.totalViolations),(0,_.pC)(G.totalWait)&&L(G.totalWait);var $,Q=(0,p.Z)(e.stops);try{for(Q.s();!($=Q.n()).done;){var X,Y,H,ee,te,re,oe=$.value;(0,_.pC)(oe.serviceCosts)&&(oe.serviceDuration=Tt(null!==(X=oe.serviceCosts[w])&&void 0!==X?X:0,B),oe.serviceDistance=kt(null!==(Y=oe.serviceCosts[g])&&void 0!==Y?Y:0,T),L(oe.serviceCosts)),(0,_.pC)(oe.cumulativeCosts)&&(oe.cumulativeDuration=Tt(null!==(H=oe.cumulativeCosts[w])&&void 0!==H?H:0,B),oe.cumulativeDistance=kt(null!==(ee=oe.cumulativeCosts[g])&&void 0!==ee?ee:0,T),L(oe.cumulativeCosts)),(0,_.pC)(oe.violations)&&(oe.lateDuration=Tt(null!==(te=oe.violations[w])&&void 0!==te?te:0,B),L(oe.violations)),(0,_.pC)(oe.wait)&&(oe.waitDuration=Tt(null!==(re=oe.wait[w])&&void 0!==re?re:0,B),L(oe.wait))}}catch(ie){Q.e(ie)}finally{Q.f()}}}function Ct(e){return Bt.apply(this,arguments)}function Bt(){return Bt=(0,u.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=je.Z.WGS84,e.next=3,(0,x.iQ)(t.spatialReference,r);case 3:return e.abrupt("return",(0,x.iV)(t,r));case 4:case"end":return e.stop()}}),e)}))),Bt.apply(this,arguments)}function Tt(e,t){switch(t){case"seconds":return e/60;case"hours":return 60*e;case"days":return 60*e*24;default:return e}}function kt(e,t){return"decimal-degrees"===t||"points"===t||"unknown"===t?e:(0,T.En)(e,t,"meters")}var Nt=h.Z.ofType(Ke.Z),Pt=h.Z.ofType($e.Z),At=h.Z.ofType(Qe.Z),Lt=h.Z.ofType(Xe.Z),It=h.Z.ofType(Ye.Z),Rt=h.Z.ofType(vt.Z),jt=g.Z.getLogger("esri.layers.RouteLayer"),xt=function(e){(0,a.Z)(r,e);var t=(0,l.Z)(r);function r(e){var o;(0,i.Z)(this,r),(o=t.call(this,e))._cachedServiceDescription=null,o._featureCollection=null,o._type="Feature Collection",o.defaultSymbols=new X,o.directionLines=null,o.directionPoints=null,o.featureCollectionType="route",o.legendEnabled=!1,o.maxScale=0,o.minScale=0,o.pointBarriers=new At,o.polygonBarriers=new Lt,o.polylineBarriers=new It,o.routeInfo=null,o.spatialReference=je.Z.WGS84,o.stops=new Rt,o.type="route";var n=function(){o._setStopSymbol(o.stops)};return o.own([(0,B.on)((function(){return o.stops}),"change",n,{sync:!0,onListenerAdd:n})]),o}return(0,s.Z)(r,[{key:"writeFeatureCollectionWebmap",value:function(e,t,r,o){var n=[this._writePolygonBarriers(),this._writePolylineBarriers(),this._writePointBarriers(),this._writeRouteInfo(),this._writeDirectionLines(),this._writeDirectionPoints(),this._writeStops()].filter((function(e){return!!e})),i=n.map((function(e,t){return t})),s="web-map"===o.origin?"featureCollection.layers":"layers";(0,S.RB)(s,n,t),t.opacity=this.opacity,t.visibility=this.visible,t.visibleLayers=i}},{key:"readDirectionLines",value:function(e,t){return this._getNetworkFeatures(t,"DirectionLines",(function(e){return Ke.Z.fromGraphic(e)}))}},{key:"readDirectionPoints",value:function(e,t){return this._getNetworkFeatures(t,"DirectionPoints",(function(e){return $e.Z.fromGraphic(e)}))}},{key:"fullExtent",get:function(){var e,t=new j.Z({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:je.Z.WGS84});if((0,_.pC)(this.routeInfo)&&(0,_.pC)(this.routeInfo.geometry))return null!==(e=this.routeInfo.geometry.extent)&&void 0!==e?e:t;if((0,_.Wi)(this.stops))return t;var r=this.stops.filter((function(e){return(0,_.pC)(e.geometry)}));if(r.length<2)return t;var o=r.getItemAt(0).geometry.spatialReference;if((0,_.Wi)(o))return t;var n=r.toArray().map((function(e){var t=e.geometry;return[t.x,t.y]}));return new mt.Z({points:n,spatialReference:o}).extent}},{key:"readMaxScale",value:function(e,t){var r,o;return null!==(r=null===(o=(gt(t)?t.layers:t.featureCollection.layers).find((function(e){return(0,_.pC)(e.layerDefinition.maxScale)})))||void 0===o?void 0:o.layerDefinition.maxScale)&&void 0!==r?r:0}},{key:"readMinScale",value:function(e,t){var r,o;return null!==(r=null===(o=(gt(t)?t.layers:t.featureCollection.layers).find((function(e){return(0,_.pC)(e.layerDefinition.minScale)})))||void 0===o?void 0:o.layerDefinition.minScale)&&void 0!==r?r:0}},{key:"readPointBarriers",value:function(e,t){return this._getNetworkFeatures(t,"Barriers",(function(e){return Qe.Z.fromGraphic(e)}))}},{key:"readPolygonBarriers",value:function(e,t){return this._getNetworkFeatures(t,"PolygonBarriers",(function(e){return Xe.Z.fromGraphic(e)}))}},{key:"readPolylineBarriers",value:function(e,t){return this._getNetworkFeatures(t,"PolylineBarriers",(function(e){return Ye.Z.fromGraphic(e)}))}},{key:"readRouteInfo",value:function(e,t){var r=this._getNetworkFeatures(t,"RouteInfo",(function(e){return He.Z.fromGraphic(e)}));return r.length>0?r.getItemAt(0):null}},{key:"readSpatialReference",value:function(e,t){var r,o,n=gt(t)?t.layers:t.featureCollection.layers;if(!n.length)return je.Z.WGS84;var i=n[0].layerDefinition,s=null!==(r=null!==(o=i.spatialReference)&&void 0!==o?o:i.extent.spatialReference)&&void 0!==r?r:O.Zn;return je.Z.fromJSON(s)}},{key:"readStops",value:function(e,t){var r=this;return this._getNetworkFeatures(t,"Stops",(function(e){return vt.Z.fromGraphic(e)}),(function(e){return r._setStopSymbol(e)}))}},{key:"title",get:function(){return(0,_.pC)(this.routeInfo)&&(0,_.pC)(this.routeInfo.name)?this.routeInfo.name:"Route"},set:function(e){e?this._override("title",e):this._clearOverride("title")}},{key:"url",get:function(){return y.Z.routeServiceUrl},set:function(e){null!=e?this._set("url",(0,W.Nm)(e,jt)):this._set("url",y.Z.routeServiceUrl)}},{key:"load",value:function(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}},{key:"removeAll",value:function(){this.removeResult(),this.pointBarriers.removeAll(),this.polygonBarriers.removeAll(),this.polylineBarriers.removeAll(),this.stops.removeAll()}},{key:"removeResult",value:function(){(0,_.pC)(this.directionLines)&&(this.directionLines.removeAll(),this._set("directionLines",null)),(0,_.pC)(this.directionPoints)&&(this.directionPoints.removeAll(),this._set("directionPoints",null)),(0,_.pC)(this.routeInfo)&&this._set("routeInfo",null)}},{key:"save",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(){var t,r,o,i,s,a,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.load();case 2:if(t=this.fullExtent,r=this.portalItem){e.next=5;break}throw new b.Z("routelayer:portal-item-not-set","save() requires to the layer to have a portal item");case 5:if(r.id){e.next=7;break}throw new b.Z("routelayer:portal-item-not-saved","Please use saveAs() first to save the routelayer");case 7:if("Feature Collection"===r.type){e.next=9;break}throw new b.Z("routelayer:portal-item-wrong-type",'Portal item needs to have type "Feature Collection"');case 9:if(!(0,_.Wi)(this.routeInfo)){e.next=11;break}throw new b.Z("routelayer:route-unsolved","save() requires a solved route");case 11:return o=r.portal,e.next=14,o._signIn();case 14:if(e.t0=o.user,e.t0){e.next=18;break}return e.next=18,r.reload();case 18:if(i=r.itemUrl,"admin"===(s=r.itemControl)||"update"===s){e.next=21;break}throw new b.Z("routelayer:insufficient-permissions","To save this layer, you need to be the owner or an administrator of your organization");case 21:return a={messages:[],origin:"portal-item",portal:o,url:i&&(0,k.mN)(i),writtenProperties:[]},l=this.write(null,a),e.next=24,Ct(t);case 24:return r.extent=e.sent,r.title=this.title,e.next=28,r.update({data:l});case 28:return e.abrupt("return",r);case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"saveAs",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(t){var r,o,i,s,a,l,u,p,c,y=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.length>1&&void 0!==y[1]?y[1]:{},e.next=3,this.load();case 3:if(!(0,_.Wi)(this.routeInfo)){e.next=5;break}throw new b.Z("routelayer:route-unsolved","saveAs() requires a solved route");case 5:if(a=H.default.from(t).clone(),null===(r=a.extent)||void 0===r){e.next=10;break}e.next=13;break;case 10:return e.next=12,Ct(this.fullExtent);case 12:a.extent=e.sent;case 13:return a.id=null,null!==(o=a.portal)&&void 0!==o||(a.portal=Y.Z.getDefault()),null!==(i=a.title)&&void 0!==i||(a.title=this.title),a.type="Feature Collection",a.typeKeywords=["Data","Feature Collection",ee.Kz.MULTI_LAYER,"Route Layer"],l=a.portal,u={messages:[],origin:"portal-item",portal:l,url:null,writtenProperties:[]},e.next=21,l._signIn();case 21:return p=null===s||void 0===s?void 0:s.folder,c=this.write(null,u),e.next=24,l.user.addItem({item:a,folder:p,data:c});case 24:return this.portalItem=a,(0,R.D)(u),u.portalItem=a,e.abrupt("return",a);case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"solve",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(t,r){var o,i,s,a,l,u,c,y,d,f,v,m,w,g,Z,S,B,T,k,N,P,A,L;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=null!==(o=null===t||void 0===t?void 0:t.stops)&&void 0!==o?o:this.stops,c=null!==(i=null===t||void 0===t?void 0:t.pointBarriers)&&void 0!==i?i:ht(this.pointBarriers),y=null!==(s=null===t||void 0===t?void 0:t.polylineBarriers)&&void 0!==s?s:ht(this.polylineBarriers),d=null!==(a=null===t||void 0===t?void 0:t.polygonBarriers)&&void 0!==a?a:ht(this.polygonBarriers),!(0,_.Wi)(u)){e.next=3;break}throw new b.Z("routelayer:undefined-stops","the route layer must have stops defined in the route parameters.");case 3:if(!((_t(u)||Zt(u))&&u.features.length<2||h.Z.isCollection(u)&&u.length<2)){e.next=5;break}throw new b.Z("routelayer:insufficent-stops","the route layer must have two or more stops to solve a route.");case 5:if(h.Z.isCollection(u)){f=(0,p.Z)(u);try{for(f.s();!(v=f.n()).done;)v.value.routeName=null}catch(n){f.e(n)}finally{f.f()}}return m=null===t||void 0===t?void 0:t.apiKey,w=this.url,e.next=10,this._getServiceDescription(w,m,r);case 10:for(P in g=e.sent,Z=bt(g),S=null!==(l=null===t||void 0===t?void 0:t.travelMode)&&void 0!==l?l:Z,B=(0,_.yl)(null===t||void 0===t?void 0:t.accumulateAttributes,[]),(0,_.pC)(S)&&(B.push(S.distanceAttributeName),S.timeAttributeName&&B.push(S.timeAttributeName)),T={startTime:new Date},k={accumulateAttributes:B,directionsOutputType:"featuresets",ignoreInvalidLocations:!0,pointBarriers:c,polylineBarriers:y,polygonBarriers:d,preserveFirstStop:!0,preserveLastStop:!0,returnBarriers:!!c,returnDirections:!0,returnPolygonBarriers:!!d,returnPolylineBarriers:!!y,returnRoutes:!0,returnStops:!0,stops:u},N=t?dt.from(t):new dt,T)null==N[P]&&(N[P]=T[P]);return N.set(k),e.prev=18,e.next=21,qe(w,N,r);case 21:A=e.sent,e.next=27;break;case 24:throw e.prev=24,e.t0=e.catch(18),(0,C.D_)(e.t0)?e.t0:new b.Z("routelayer:failed-route-request","the routing request failed",{error:e.t0});case 27:return L=this._toRouteLayerSolution(A),e.abrupt("return",(this._isOverridden("title")||(this.title=(0,_.yl)(L.routeInfo.name,"Route")),St(L,g,N),L));case 29:case"end":return e.stop()}}),e,this,[[18,24]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"update",value:function(e){var t=e.stops,r=e.directionLines,o=e.directionPoints,n=e.pointBarriers,i=e.polylineBarriers,s=e.polygonBarriers,a=e.routeInfo;this.set({stops:t,pointBarriers:n,polylineBarriers:i,polygonBarriers:s}),this._set("directionLines",r),this._set("directionPoints",o),this._set("routeInfo",a)}},{key:"_getNetworkFeatures",value:function(e,t,r,o){var n=this,i=(gt(e)?e.layers:e.featureCollection.layers).find((function(e){return e.layerDefinition.name===t}));if((0,_.Wi)(i))return new h.Z;var s=i.layerDefinition,a=i.popupInfo,l=i.featureSet,u=s.drawingInfo.renderer,p=l.features,c=u&&(0,m.a)(u),y=p.map((function(e){var o,i,s,l=f.Z.fromJSON(e),u=r(l);return null!==(o=u.symbol)&&void 0!==o||(u.symbol=null!==(i=null===c||void 0===c?void 0:c.getSymbol(l))&&void 0!==i?i:n._getNetworkSymbol(t)),null!==(s=u.popupTemplate)&&void 0!==s||(u.popupTemplate=a&&v.Z.fromJSON(a)),u}));return o&&y.some((function(e){return!e.symbol}))&&o(y),new h.Z(y)}},{key:"_getNetworkSymbol",value:function(e){switch(e){case"Barriers":return this.defaultSymbols.pointBarriers;case"DirectionPoints":return this.defaultSymbols.directionPoints;case"DirectionLines":return this.defaultSymbols.directionLines;case"PolylineBarriers":return this.defaultSymbols.polylineBarriers;case"PolygonBarriers":return this.defaultSymbols.polygonBarriers;case"RouteInfo":return this.defaultSymbols.routeInfo;case"Stops":return null}}},{key:"_getServiceDescription",value:function(){var e=(0,u.Z)((0,n.Z)().mark((function e(t,r,o){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,_.pC)(this._cachedServiceDescription)||this._cachedServiceDescription.url!==t){e.next=2;break}return e.abrupt("return",this._cachedServiceDescription.serviceDescription);case 2:return e.next=4,ve(t,r,o);case 4:return i=e.sent,e.abrupt("return",(this._cachedServiceDescription={serviceDescription:i,url:t},i));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,o){return e.apply(this,arguments)}}()},{key:"_setStopSymbol",value:function(e){if(e&&0!==e.length&&!(0,_.Wi)(this.defaultSymbols.stops)&&!e.every((function(e){return(0,_.pC)(e.symbol)}))){var t=this.defaultSymbols.stops,r=t.first,n=t.last,i=t.middle,s=t.unlocated,a=t.waypoint,l=t.break;if((0,_.Wi)(this.routeInfo)||1===e.length)e.forEach((function(t,o){switch(o){case 0:t.symbol=r;break;case e.length-1:t.symbol=n;break;default:t.symbol=i}}));else{var u,c=e.map((function(e){return e.sequence})).filter((function(e){return(0,_.pC)(e)})),y=Math.min.apply(Math,(0,o.Z)(c)),d=Math.max.apply(Math,(0,o.Z)(c)),f=(0,p.Z)(e);try{for(f.s();!(u=f.n()).done;){var v=u.value;v.sequence!==y?v.sequence!==d?"ok"===v.status||"not-located-on-closest"===v.status?"waypoint"!==v.locationType?"break"!==v.locationType?v.symbol=i:v.symbol=l:v.symbol=a:v.symbol=s:v.symbol=n:v.symbol=r}}catch(m){f.e(m)}finally{f.f()}}}}},{key:"_toRouteLayerSolution",value:function(e){var t,r,o,n,i,s=this,a=e.routeResults[0].stops.map((function(e){return vt.Z.fromJSON(e.toJSON())}));this._setStopSymbol(a);var l=new Rt(a),u=new Lt(null===(t=e.polygonBarriers)||void 0===t?void 0:t.map((function(e){var t=Xe.Z.fromJSON(e.toJSON());return t.symbol=s.defaultSymbols.polygonBarriers,t}))),p=new It(null===(r=e.polylineBarriers)||void 0===r?void 0:r.map((function(e){var t=Ye.Z.fromJSON(e.toJSON());return t.symbol=s.defaultSymbols.polylineBarriers,t}))),c=new At(null===(o=e.pointBarriers)||void 0===o?void 0:o.map((function(e){var t=Qe.Z.fromJSON(e.toJSON());return t.symbol=s.defaultSymbols.pointBarriers,t}))),y=He.Z.fromJSON(e.routeResults[0].route.toJSON());y.symbol=this.defaultSymbols.routeInfo;var d=new Pt(null===(n=e.routeResults[0].directionPoints)||void 0===n?void 0:n.features.map((function(e){var t=$e.Z.fromJSON(e.toJSON());return t.symbol=s.defaultSymbols.directionPoints,t})));return{directionLines:new Nt(null===(i=e.routeResults[0].directionLines)||void 0===i?void 0:i.features.map((function(e){var t=Ke.Z.fromJSON(e.toJSON());return t.symbol=s.defaultSymbols.directionLines,t}))),directionPoints:d,pointBarriers:c,polygonBarriers:u,polylineBarriers:p,routeInfo:y,stops:l}}},{key:"_writeDirectionLines",value:function(){return this._writeNetworkFeatures(this.directionLines,this.defaultSymbols.directionLines,"esriGeometryPolyline",Ke.Z.fields,Ke.Z.popupInfo,"DirectionLines","Direction Lines")}},{key:"_writeDirectionPoints",value:function(){return this._writeNetworkFeatures(this.directionPoints,this.defaultSymbols.directionPoints,"esriGeometryPoint",$e.Z.fields,$e.Z.popupInfo,"DirectionPoints","Direction Points")}},{key:"_writeNetworkFeatures",value:function(e,t,r,o,n,i,s){return(0,_.Wi)(e)||!e.length?null:{featureSet:{features:e.toArray().map((function(e){return function(e){var t=e.toGraphic().toJSON();return{attributes:t.attributes,geometry:t.geometry,popupInfo:t.popupTemplate,symbol:t.symbol}}(e)})),geometryType:r},layerDefinition:{capabilities:"Query,Update,Editing",drawingInfo:{renderer:{type:"simple",symbol:(0,_.pC)(t)?t.toJSON():wt(r)}},extent:this.fullExtent.toJSON(),fields:o,geometryType:r,hasM:!1,hasZ:!1,maxScale:this.maxScale,minScale:this.minScale,name:i,objectIdField:"__OBJECTID",spatialReference:this.spatialReference.toJSON(),title:s,type:"Feature Layer",typeIdField:""},popupInfo:n}}},{key:"_writePointBarriers",value:function(){return this._writeNetworkFeatures(this.pointBarriers,this.defaultSymbols.pointBarriers,"esriGeometryPoint",Qe.Z.fields,Qe.Z.popupInfo,"Barriers","Point Barriers")}},{key:"_writePolygonBarriers",value:function(){return this._writeNetworkFeatures(this.polygonBarriers,this.defaultSymbols.polygonBarriers,"esriGeometryPolygon",Xe.Z.fields,Xe.Z.popupInfo,"PolygonBarriers","Polygon Barriers")}},{key:"_writePolylineBarriers",value:function(){return this._writeNetworkFeatures(this.polylineBarriers,this.defaultSymbols.polylineBarriers,"esriGeometryPolyline",Ye.Z.fields,Ye.Z.popupInfo,"PolylineBarriers","Line Barriers")}},{key:"_writeRouteInfo",value:function(){return this._writeNetworkFeatures((0,_.pC)(this.routeInfo)?new h.Z([this.routeInfo]):null,this.defaultSymbols.routeInfo,"esriGeometryPolyline",He.Z.fields,He.Z.popupInfo,"RouteInfo","Route Details")}},{key:"_writeStops",value:function(){var e=this._writeNetworkFeatures(this.stops,null,"esriGeometryPoint",vt.Z.fields,vt.Z.popupInfo,"Stops","Stops");if((0,_.Wi)(e))return null;var t=this.defaultSymbols.stops,r=(0,_.pC)(t)&&(0,_.pC)(t.first)&&t.first.toJSON(),o=(0,_.pC)(t)&&(0,_.pC)(t.middle)&&t.middle.toJSON(),n=(0,_.pC)(t)&&(0,_.pC)(t.last)&&t.last.toJSON();return e.layerDefinition.drawingInfo.renderer={type:"uniqueValue",field1:"Sequence",defaultSymbol:o,uniqueValueInfos:[{value:"1",symbol:r,label:"First Stop"},{value:"".concat(this.stops.length),symbol:n,label:"Last Stop"}]},e}}]),r}((0,D.h)((0,F.M)((0,M.q)((0,E.I)((0,Z.R)((0,w.p)(J.Z)))))));(0,c._)([(0,N.Cb)({readOnly:!0,json:{read:!1,origins:{"portal-item":{write:{allowNull:!0,ignoreOrigin:!0}},"web-map":{write:{overridePolicy:function(){return{allowNull:!0,ignoreOrigin:null==this.portalItem}}}}}}})],xt.prototype,"_featureCollection",void 0),(0,c._)([(0,I.c)(["web-map","portal-item"],"_featureCollection")],xt.prototype,"writeFeatureCollectionWebmap",null),(0,c._)([(0,N.Cb)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{target:"type",overridePolicy:function(){return{ignoreOrigin:null!=this.portalItem}}}}}}})],xt.prototype,"_type",void 0),(0,c._)([(0,N.Cb)({nonNullable:!0,type:X})],xt.prototype,"defaultSymbols",void 0),(0,c._)([(0,N.Cb)({readOnly:!0})],xt.prototype,"directionLines",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"directionLines",["layers","featureCollection.layers"])],xt.prototype,"readDirectionLines",null),(0,c._)([(0,N.Cb)({readOnly:!0})],xt.prototype,"directionPoints",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"directionPoints",["layers","featureCollection.layers"])],xt.prototype,"readDirectionPoints",null),(0,c._)([(0,N.Cb)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],xt.prototype,"featureCollectionType",void 0),(0,c._)([(0,N.Cb)({readOnly:!0})],xt.prototype,"fullExtent",null),(0,c._)([(0,N.Cb)({json:{origins:{"web-map":{name:"featureCollection.showLegend"}},write:!0}})],xt.prototype,"legendEnabled",void 0),(0,c._)([(0,N.Cb)({type:["show","hide"]})],xt.prototype,"listMode",void 0),(0,c._)([(0,N.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],xt.prototype,"maxScale",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"maxScale",["layers","featureCollection.layers"])],xt.prototype,"readMaxScale",null),(0,c._)([(0,N.Cb)({type:Number,nonNullable:!0,json:{write:!1}})],xt.prototype,"minScale",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"minScale",["layers","featureCollection.layers"])],xt.prototype,"readMinScale",null),(0,c._)([(0,N.Cb)({type:["ArcGISFeatureLayer"],value:"ArcGISFeatureLayer"})],xt.prototype,"operationalLayerType",void 0),(0,c._)([(0,N.Cb)({nonNullable:!0,type:h.Z.ofType(Qe.Z)})],xt.prototype,"pointBarriers",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"pointBarriers",["layers","featureCollection.layers"])],xt.prototype,"readPointBarriers",null),(0,c._)([(0,N.Cb)({nonNullable:!0,type:h.Z.ofType(Xe.Z)})],xt.prototype,"polygonBarriers",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"polygonBarriers",["layers","featureCollection.layers"])],xt.prototype,"readPolygonBarriers",null),(0,c._)([(0,N.Cb)({nonNullable:!0,type:h.Z.ofType(Ye.Z)})],xt.prototype,"polylineBarriers",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"polylineBarriers",["layers","featureCollection.layers"])],xt.prototype,"readPolylineBarriers",null),(0,c._)([(0,N.Cb)({readOnly:!0})],xt.prototype,"routeInfo",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"routeInfo",["layers","featureCollection.layers"])],xt.prototype,"readRouteInfo",null),(0,c._)([(0,N.Cb)({type:je.Z})],xt.prototype,"spatialReference",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"spatialReference",["layers","featureCollection.layers"])],xt.prototype,"readSpatialReference",null),(0,c._)([(0,N.Cb)({nonNullable:!0,type:h.Z.ofType(vt.Z)})],xt.prototype,"stops",void 0),(0,c._)([(0,A.r)(["web-map","portal-item"],"stops",["layers","featureCollection.layers"])],xt.prototype,"readStops",null),(0,c._)([(0,N.Cb)()],xt.prototype,"title",null),(0,c._)([(0,N.Cb)({readOnly:!0,json:{read:!1}})],xt.prototype,"type",void 0),(0,c._)([(0,N.Cb)()],xt.prototype,"url",null);var Ot=xt=(0,c._)([(0,L.j)("esri.layers.RouteLayer")],xt)},73117:function(e,t,r){r.d(t,{$o:function(){return f},Kz:function(){return m},_$:function(){return y},ck:function(){return d},qj:function(){return c}});var o=r(37762),n=r(74165),i=r(15861),s=r(79803),a=r(78952),l=r(81753);function u(e){return p.apply(this,arguments)}function p(){return p=(0,i.Z)((0,n.Z)().mark((function e(t){var r,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.spatialReference).isWGS84){e.next=3;break}return e.abrupt("return",t.clone());case 3:if(!r.isWebMercator){e.next=5;break}return e.abrupt("return",(0,l.Sx)(t));case 5:return o=a.Z.WGS84,e.next=8,(0,s.iQ)(r,o);case 8:return e.abrupt("return",(0,s.iV)(t,o));case 9:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function c(e,t){if(!y(e,t)){var r=e.typeKeywords;r?r.push(t):e.typeKeywords=[t]}}function y(e,t){var r;return!(null===(r=e.typeKeywords)||void 0===r||!r.includes(t))}function d(e,t){var r=e.typeKeywords;if(r){var o=r.indexOf(t);o>-1&&r.splice(o,1)}}function f(e){return v.apply(this,arguments)}function v(){return(v=(0,i.Z)((0,n.Z)().mark((function e(t){var r,i,s,a,l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=t.clone().normalize()).length>1){s=(0,o.Z)(r);try{for(s.s();!(a=s.n()).done;)l=a.value,i?l.width>i.width&&(i=l):i=l}catch(n){s.e(n)}finally{s.f()}}else i=r[0];return e.abrupt("return",u(i));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m={DEVELOPER_BASEMAP:"DeveloperBasemap",JSAPI:"ArcGIS API for JavaScript",METADATA:"Metadata",MULTI_LAYER:"Multilayer",SINGLE_LAYER:"Singlelayer",TABLE:"Table"}}}]);
//# sourceMappingURL=3589.ff1b87a2.chunk.js.map