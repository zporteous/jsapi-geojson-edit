"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[2114,2463,2170],{58935:function(t,e,n){n.d(e,{N9:function(){return x},Pr:function(){return C},SP:function(){return _},Se:function(){return k},cy:function(){return m},i_:function(){return b},ym:function(){return w}});var r=n(92026),i=n(47898),a=n(5163);function o(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return(0,a.VG)(t,(0,i.nn)(e,n).value,n,r,o)}function u(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return(0,a.LO)(t,(0,i.nn)(e,n).value,n,r,o)}function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,a.Rd)(t,e.value,e.unit,n,r)}function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,a.mg)(t,e.value,e.unit,n,r)}function c(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,a.Wv)(t,e.value,e.unit,n,r)}function p(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,a.h9)(t,e.value,e.unit,n,r)}function h(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,a.ld)(t,e.value,e.unit,n,r)}function v(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,a.Ud)(t,e.value,e.unit,n,r)}function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,a.q6)(t,e.value,e.unit,n,r)}function f(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,a.Zv)(t,e.value,e.unit,n,r)}function y(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,a.aC)(t,e.value,e.unit,n,r)}function g(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,a.yc)(t,e.value,e.unit,n,r)}function m(t,e,n){return(0,a.L4)(t.value,t.unit,t.rotationType,e,n)}function _(t,e,n){return(0,a._o)(t.value,t.unit,t.rotationType,e,n)}function x(t,e,n,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";switch(i=(0,r.Pt)(i,2),n){case"imperial":return v(t,e,i,a);case"metric":return s(t,e,i,a);default:return o(t,e,n,i,a)}}function b(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";switch(n){case"imperial":return d(t,e,r,i);case"metric":return l(t,e,r,i);default:return u(t,e,n,r,i)}}function w(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";switch(n){case"imperial":return f(t,e,r,i);case"metric":return c(t,e,r,i);default:return o(t,e,n,r,i)}}function C(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";switch(n){case"imperial":return y(t,e,r,i);case"metric":return p(t,e,r,i);default:return u(t,e,n,r,i)}}function k(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";switch(n){case"imperial":return g(t,e,r,i);case"metric":return h(t,e,r,i);default:return o(t,e,n,r,i)}}},47898:function(t,e,n){n.d(e,{Fp:function(){return l},GJ:function(){return u},ne:function(){return o},nn:function(){return s},yG:function(){return a},yP:function(){return c}});var r=n(92026),i=n(68860);function a(t,e){return{type:(0,i.UF)(e),value:t,unit:e}}function o(t,e){return{type:(0,i.UF)(e),value:t,unit:e}}function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arithmetic";return{type:(0,i.UF)(e),value:t,unit:e,rotationType:n}}function s(t,e){return function(t,e){return{type:(0,i.UF)(e),value:t,unit:e}}((0,i.En)(t.value,t.unit,e),e)}function l(t,e){return(0,r.Wi)(t)?e:(0,r.Wi)(e)||t.value>(0,i.En)(e.value,e.unit,t.unit)?t:e}var c=a(0,"meters")},92463:function(t,e,n){n.r(e),n.d(e,{hydratedAdapter:function(){return s}});var r=n(53866),i=n(77577),a=n(7882),o=n(80885),u=n(29909),s={convertToGEGeometry:function(t,e){if(null==e)return null;var n="cache"in e?e.cache._geVersion:void 0;return null==n&&(n=t.convertJSONToGeometry(e),"cache"in e&&(e.cache._geVersion=n)),n},exportPoint:function(t,e,n){var r=t.hasZ(e),i=t.hasM(e),o=new a.Z({x:t.getPointX(e),y:t.getPointY(e),spatialReference:n});return r&&(o.z=t.getPointZ(e)),i&&(o.m=t.getPointM(e)),o.cache._geVersion=e,o},exportPolygon:function(t,e,n){var r=new o.Z({rings:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:n});return r.cache._geVersion=e,r},exportPolyline:function(t,e,n){var r=new u.Z({paths:t.exportPaths(e),hasZ:t.hasZ(e),hasM:t.hasM(e),spatialReference:n});return r.cache._geVersion=e,r},exportMultipoint:function(t,e,n){var r=new i.Z({hasZ:t.hasZ(e),hasM:t.hasM(e),points:t.exportPoints(e),spatialReference:n});return r.cache._geVersion=e,r},exportExtent:function(t,e,n){var i=t.hasZ(e),a=t.hasM(e),o=new r.Z({xmin:t.getXMin(e),ymin:t.getYMin(e),xmax:t.getXMax(e),ymax:t.getYMax(e),spatialReference:n});if(i){var u=t.getZExtent(e);o.zmin=u.vmin,o.zmax=u.vmax}if(a){var s=t.getMExtent(e);o.mmin=s.vmin,o.mmax=s.vmax}return o.cache._geVersion=e,o}}},2170:function(t,e,n){n.r(e),n.d(e,{buffer:function(){return S},clip:function(){return u},contains:function(){return l},convexHull:function(){return b},crosses:function(){return c},cut:function(){return s},densify:function(){return I},difference:function(){return w},disjoint:function(){return y},distance:function(){return p},equals:function(){return h},extendedSpatialReferenceInfo:function(){return o},flipHorizontal:function(){return P},flipVertical:function(){return A},generalize:function(){return W},geodesicArea:function(){return F},geodesicBuffer:function(){return M},geodesicDensify:function(){return D},geodesicLength:function(){return H},intersect:function(){return k},intersects:function(){return v},isSimple:function(){return _},nearestCoordinate:function(){return O},nearestVertex:function(){return E},nearestVertices:function(){return V},offset:function(){return T},overlaps:function(){return g},planarArea:function(){return z},planarLength:function(){return L},relate:function(){return m},rotate:function(){return G},simplify:function(){return x},symmetricDifference:function(){return C},touches:function(){return d},union:function(){return Z},within:function(){return f}});var r=n(99058),i=n(92463);function a(t){return Array.isArray(t)?t[0].spatialReference:t&&t.spatialReference}function o(t){return r.G.extendedSpatialReferenceInfo(t)}function u(t,e){return r.G.clip(i.hydratedAdapter,a(t),t,e)}function s(t,e){return r.G.cut(i.hydratedAdapter,a(t),t,e)}function l(t,e){return r.G.contains(i.hydratedAdapter,a(t),t,e)}function c(t,e){return r.G.crosses(i.hydratedAdapter,a(t),t,e)}function p(t,e,n){return r.G.distance(i.hydratedAdapter,a(t),t,e,n)}function h(t,e){return r.G.equals(i.hydratedAdapter,a(t),t,e)}function v(t,e){return r.G.intersects(i.hydratedAdapter,a(t),t,e)}function d(t,e){return r.G.touches(i.hydratedAdapter,a(t),t,e)}function f(t,e){return r.G.within(i.hydratedAdapter,a(t),t,e)}function y(t,e){return r.G.disjoint(i.hydratedAdapter,a(t),t,e)}function g(t,e){return r.G.overlaps(i.hydratedAdapter,a(t),t,e)}function m(t,e,n){return r.G.relate(i.hydratedAdapter,a(t),t,e,n)}function _(t){return r.G.isSimple(i.hydratedAdapter,a(t),t)}function x(t){return r.G.simplify(i.hydratedAdapter,a(t),t)}function b(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.G.convexHull(i.hydratedAdapter,a(t),t,e)}function w(t,e){return r.G.difference(i.hydratedAdapter,a(t),t,e)}function C(t,e){return r.G.symmetricDifference(i.hydratedAdapter,a(t),t,e)}function k(t,e){return r.G.intersect(i.hydratedAdapter,a(t),t,e)}function Z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.G.union(i.hydratedAdapter,a(t),t,e)}function T(t,e,n,o,u,s){return r.G.offset(i.hydratedAdapter,a(t),t,e,n,o,u,s)}function S(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r.G.buffer(i.hydratedAdapter,a(t),t,e,n,o)}function M(t,e,n,o,u,s){return r.G.geodesicBuffer(i.hydratedAdapter,a(t),t,e,n,o,u,s)}function O(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r.G.nearestCoordinate(i.hydratedAdapter,a(t),t,e,n)}function E(t,e){return r.G.nearestVertex(i.hydratedAdapter,a(t),t,e)}function V(t,e,n,o){return r.G.nearestVertices(i.hydratedAdapter,a(t),t,e,n,o)}function R(t){return"xmin"in t?"center"in t?t.center:null:"x"in t?t:"extent"in t?t.extent.center:null}function G(t,e,n){var i;if(null==t)throw new Error("Illegal Argument Exception");var a=t.spatialReference;if(null==(n=null!==(i=n)&&void 0!==i?i:R(t)))throw new Error("Illegal Argument Exception");var o=t.constructor.fromJSON(r.G.rotate(t,e,n));return o.spatialReference=a,o}function P(t,e){var n;if(null==t)throw new Error("Illegal Argument Exception");var i=t.spatialReference;if(null==(e=null!==(n=e)&&void 0!==n?n:R(t)))throw new Error("Illegal Argument Exception");var a=t.constructor.fromJSON(r.G.flipHorizontal(t,e));return a.spatialReference=i,a}function A(t,e){var n;if(null==t)throw new Error("Illegal Argument Exception");var i=t.spatialReference;if(null==(e=null!==(n=e)&&void 0!==n?n:R(t)))throw new Error("Illegal Argument Exception");var a=t.constructor.fromJSON(r.G.flipVertical(t,e));return a.spatialReference=i,a}function W(t,e,n,o){return r.G.generalize(i.hydratedAdapter,a(t),t,e,n,o)}function I(t,e,n){return r.G.densify(i.hydratedAdapter,a(t),t,e,n)}function D(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return r.G.geodesicDensify(i.hydratedAdapter,a(t),t,e,n,o)}function z(t,e){return r.G.planarArea(i.hydratedAdapter,a(t),t,e)}function L(t,e){return r.G.planarLength(i.hydratedAdapter,a(t),t,e)}function F(t,e,n){return r.G.geodesicArea(i.hydratedAdapter,a(t),t,e,n)}function H(t,e,n){return r.G.geodesicLength(i.hydratedAdapter,a(t),t,e,n)}},77566:function(t,e,n){n.d(e,{T:function(){return J},I:function(){return $}});var r=n(1413),i=n(15671),a=n(43144),o=n(60136),u=n(54062),s=n(27366),l=n(52639),c=(n(93169),n(91505)),p=n(41691),h=n(42537),v=n(92026),d=n(49861),f=n(63780),y=(n(25243),n(69912)),g=n(93655),m=(n(59486),n(84652)),_=n(68860),x=n(42137),b=n(2170),w=n(69662),C=n(92975),k=n(22018),Z=n(89494),T=n(48976),S=n(98131),M=n(11186),O=n(71353),E=n(14320),V=n(7882);function R(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,v.pC)(n)?[t,e,n]:[t,e]}function G(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,v.pC)(n)?{x:t,y:e,z:n}:{x:t,y:e}}var P=function(){function t(e){(0,i.Z)(this,t),this.spatialReference=e}return(0,a.Z)(t,[{key:"mapToLocalMultiple",value:function(t){var e=this;return(0,v.lV)(t.map((function(t){return e.mapToLocal(t)})))}},{key:"doUnnormalization",get:function(){return!1}}]),t}(),A=function(t){(0,o.Z)(n,t);var e=(0,u.Z)(n);function n(t,r){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,i.Z)(this,n),(a=e.call(this,r)).defaultZ=o,a.transform=(0,Z.c)(),a.transformInv=(0,Z.c)(),a.transform=(0,Z.a)(t),(0,k.b)(a.transformInv,a.transform),a}return(0,a.Z)(n,[{key:"makeMapPoint",value:function(t,e){return R(t,e,this.defaultZ)}},{key:"mapToLocal",value:function(t){return G(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}},{key:"localToMap",value:function(t){return R(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this.defaultZ)}}]),n}(P),W=function(t){(0,o.Z)(n,t);var e=(0,u.Z)(n);function n(t,r){var a;(0,i.Z)(this,n),(a=e.call(this,t.spatialReference)).view=t,a.defaultZ=null,a.pWS=(0,O.c)(),a.tangentFrameUpWS=(0,O.c)(),a.tangentFrameRightWS=(0,O.c)(),a.tangentFrameForwardWS=(0,O.c)(),a.localFrameRightWS=(0,O.c)(),a.localFrameUpWS=(0,O.c)(),a.worldToLocalTransform=(0,S.a)(),a.localToWorldTransform=(0,S.a)(),a.scale=1,a.scale=t.resolution,a.referenceMapPoint=r,a.defaultZ=r.hasZ?r.z:null;var o=t.state.camera.viewRight;a.view.renderCoordsHelper.toRenderCoords(a.referenceMapPoint,a.pWS),a.view.renderCoordsHelper.worldBasisAtPosition(a.pWS,E.R.X,a.tangentFrameRightWS),a.view.renderCoordsHelper.worldBasisAtPosition(a.pWS,E.R.Y,a.tangentFrameUpWS),a.view.renderCoordsHelper.worldBasisAtPosition(a.pWS,E.R.Z,a.tangentFrameForwardWS);var u=(0,O.c)();return(0,M.g)(u,a.tangentFrameForwardWS,(0,M.e)(o,a.tangentFrameForwardWS)),(0,M.b)(a.localFrameRightWS,o,u),(0,M.n)(a.localFrameRightWS,a.localFrameRightWS),(0,M.f)(a.localFrameUpWS,a.tangentFrameForwardWS,a.localFrameRightWS),(0,T.r)(a.worldToLocalTransform,a.localFrameRightWS,a.tangentFrameRightWS),(0,T.i)(a.localToWorldTransform,a.worldToLocalTransform),a}return(0,a.Z)(n,[{key:"doUnnormalization",get:function(){return"global"===this.view.viewingMode}},{key:"makeMapPoint",value:function(t,e){return R(t,e,this.defaultZ)}},{key:"mapToLocal",value:function(t){var e=(0,O.c)();this.view.renderCoordsHelper.toRenderCoords(new V.Z({x:t[0],y:t[1],spatialReference:this.spatialReference}),e),(0,M.q)(e,e,this.worldToLocalTransform);var n=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return(0,v.pC)(n)?G(n.x/this.scale,n.y/this.scale):null}},{key:"localToMap",value:function(t){var e=(0,O.c)();this.view.renderCoordsHelper.toRenderCoords(new V.Z({x:t.x*this.scale,y:t.y*this.scale,spatialReference:this.spatialReference}),e),(0,M.q)(e,e,this.localToWorldTransform);var n=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return(0,v.pC)(n)?R(n.x,n.y,this.defaultZ):null}}]),n}(P);function I(t,e){if("2d"===t.type)return new A(t.state.transform,t.spatialReference,e.length>2?e[2]:null);if("3d"===t.type){var n=e.length>2?new V.Z({x:e[0],y:e[1],z:e[2],spatialReference:t.spatialReference}):new V.Z({x:e[0],y:e[1],spatialReference:t.spatialReference});return new W(t,n)}return null}var D=n(77577),z=n(29909),L=n(80885);function F(t,e){var n=new V.Z({x:t[0],y:t[1],spatialReference:e});return t.length>2&&(n.z=t[2]),n}function H(t,e){return new D.Z({points:t,spatialReference:e})}function U(t,e,n){var r=new z.Z({paths:t,spatialReference:e});return n&&(0,w.nc)(r),r}function j(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=(0,m.d9)(t);i.forEach((function(t){var e=t[0],n=t[t.length-1];(0,f.fS)(e,n)&&1!==t.length||t.push(t[0])}));var a=new L.Z({rings:i,spatialReference:e});return a.rings.forEach((function(t){(0,w.bu)(t,!1,!1)||t.reverse()})),n&&(0,w.nc)(a),r&&a.isSelfIntersecting&&(0,C.JY)(e)&&(a=(0,b.simplify)(a)),a}function q(t,e,n){var r=e.mapToLocalMultiple(t),i=[],a={x:r[0].x,y:r[0].y},o=r[1].x,u=r[1].y,s=Math.round(o-a.x),l=Math.round(u-a.y),c=Math.max(Math.abs(s),Math.abs(l));if(n){var p={x:a.x+c,y:a.y+c},h={x:a.x-c,y:a.y-c};i.push(G(p.x,h.y),G(h.x,h.y),G(h.x,p.y),G(p.x,p.y))}else{var d={x:s>0?a.x+c:a.x-c,y:l>0?a.y+c:a.y-c};i.push(G(a.x,a.y),G(d.x,a.y),G(d.x,d.y),G(a.x,d.y))}return j([(0,v.lV)(i.map((function(t){return e.localToMap(t)})))],e.spatialReference,e.doUnnormalization,!0)}function N(t,e,n){var r=e.mapToLocalMultiple(t);if(1===r.length){var i=48,a=r[0];r=[G(a.x-i,a.y+i),G(a.x+i,a.y-i),G(a.x+i,a.y-i),G(a.x-i,a.y+i)]}var o=[],u={x:r[0].x,y:r[0].y},s={x:r[1].x,y:r[1].y};if(n){var l=Math.round(s.x-u.x),c=Math.round(s.y-u.y);o.push(G(u.x-l,u.y-c),G(s.x,u.y-c),G(s.x,s.y),G(u.x-l,s.y))}else o.push(G(u.x,u.y),G(s.x,u.y),G(s.x,s.y),G(u.x,s.y));return j([(0,v.lV)(o.map((function(t){return e.localToMap(t)})))],e.spatialReference,e.doUnnormalization,!0)}function Y(t,e,n,r){var i=e.mapToLocalMultiple(t),a=null,o=null;if(n)a=i[0],o=i[1];else{var u=i[0],s=i[1],l=Math.round(s.x-u.x),c=Math.round(s.y-u.y),p=Math.max(Math.abs(l),Math.abs(c));a=G(l>0?u.x+p/2:u.x-p/2,c>0?u.y+p/2:u.y-p/2),o=G(Math.abs(l)>Math.abs(c)?a.x-p/2:a.x,Math.abs(l)>Math.abs(c)?a.y:a.y-p/2)}var h=e.localToMap(a),d=e.localToMap(o);if((0,v.Wi)(h)||(0,v.Wi)(d))return null;e.doUnnormalization&&(0,w.Sq)([[h,d]],e.spatialReference);var f=F(h,e.spatialReference),y=F(d,e.spatialReference),g=(0,_.c9)(e.spatialReference),m=0;if((0,C.JY)(e.spatialReference))m=g*(0,b.distance)(f,y,null);else{var k=a.x-o.x,Z=a.y-o.y;m=g*Math.sqrt(k*k+Z*Z)*(r||1)}var T=new x.Z({center:f,radius:m,radiusUnit:"meters",spatialReference:e.spatialReference});return j(T.rings,T.spatialReference,!1)}function X(t,e,n){for(var r=e.mapToLocalMultiple(t),i=r[0],a=r[1],o=Math.round(a.x-i.x),u=Math.round(a.y-i.y),s=G(n?i.x:i.x+o/2,n?i.y:i.y+u/2),l=n?o:o/2,c=n?u:u/2,p=[],h=2*Math.PI/60,d=0;d<60;d++){var f=Math.cos(d*h),y=Math.sin(d*h),g=G(l*f+s.x,c*y+s.y);p.push(g)}return p.push(p[0]),j([(0,v.lV)(p.map((function(t){return e.localToMap(t)})))],e.spatialReference,e.doUnnormalization,!1)}var B=n(29919),J=function(t){(0,o.Z)(n,t);var e=(0,u.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t))._graphic=null,r.defaultZ=0,r.geometryType=null,r.hasZ=!0,r.mode=null,r.snappingManager=null,r.snapToScene=!1,r}return(0,a.Z)(n,[{key:"initialize",value:function(){var t=this;this.internalGraphicsLayer=new g.Z({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer),this.drawOperation=this.makeDrawOperation(),this.handles.add([this.drawOperation.on("vertex-add",(function(e){return t.onVertexAdd(e)})),this.drawOperation.on("vertex-remove",(function(e){return t.onVertexRemove(e)})),this.drawOperation.on("vertex-update",(function(e){return t.onVertexUpdate(e)})),this.drawOperation.on("cursor-update",(function(e){return t.onCursorUpdate(e)})),this.drawOperation.on("complete",(function(e){return t.onComplete(e)}))]),this.finishToolCreation()}},{key:"destroy",value:function(){this.drawOperation=(0,v.SC)(this.drawOperation),this._destroyAllVisualisations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=(0,v.SC)(this.internalGraphicsLayer),this._set("view",null)}},{key:"canRedo",get:function(){return this.drawOperation.canRedo}},{key:"canUndo",get:function(){return this.drawOperation.canUndo}},{key:"centered",set:function(t){this._set("centered",t),this._updateGraphic()}},{key:"enabled",set:function(t){this.drawOperation.interactive=t,this._set("enabled",t)}},{key:"forceUniformSize",set:function(t){this._set("forceUniformSize",t),this._updateGraphic()}},{key:"graphic",get:function(){return this._graphic}},{key:"graphicSymbol",set:function(t){this._set("graphicSymbol",t),(0,v.pC)(this._graphic)&&(this._graphic.symbol=t)}},{key:"updating",get:function(){var t,e;return null!==(t=null===(e=this.drawOperation)||void 0===e?void 0:e.updating)&&void 0!==t&&t}},{key:"completeCreateOperation",value:function(){this.drawOperation.complete()}},{key:"onInputEvent",value:function(t){this.drawOperation.onInputEvent(t)}},{key:"redo",value:function(){this.drawOperation.redo()}},{key:"reset",value:function(){}},{key:"undo",value:function(){this.drawOperation.undo()}},{key:"_createGraphic",value:function(t){var e=this;this._graphic=new l.Z((0,r.Z)((0,r.Z)({},this.graphicProperties),{},{geometry:t,symbol:this.graphicSymbol})),this.internalGraphicsLayer.add(this._graphic),this.handles.add(this.initializeGraphic(this._graphic)),this.notifyChange("graphic"),this.handles.add((0,h.kB)((function(){(0,v.pC)(e._graphic)&&(e.internalGraphicsLayer.remove(e._graphic),e._graphic=(0,v.SC)(e._graphic))})),Q)}},{key:"_destroyAllVisualisations",value:function(){this.handles.remove(K.outline),this.handles.remove(K.regularVertices),this.handles.remove(K.activeVertex),this.handles.remove(Q)}},{key:"_getCreateOperationGeometry",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{operationComplete:!1};if(null==this.drawOperation||0===this.drawOperation.numVertices)return null;var e=this.drawOperation.stagedVertex,n=this.drawOperation.committedVertices,r=n.slice();(0,v.pC)(e)&&r.push(this.drawOperation.coordinateHelper.pointToArray(e));var i=(0,v.pC)(e)?this.drawOperation.coordinateHelper.pointToArray(e):n.splice(-1)[0],a={regularVertices:null,activeVertex:null,full:null,outline:null},o=r.length,u=this.view.spatialReference,s="3d"===this.view.type&&"global"===this.view.viewingMode;switch(this.geometryType){case"point":a.regularVertices=n,a.activeVertex=i,a.full=this.drawOperation.coordinateHelper.arrayToPoint(r[0]);break;case"multipoint":a.regularVertices=n,a.activeVertex=i,o>0&&(a.full=H(r,u));break;case"polyline":a.regularVertices=n,a.activeVertex=i,o>0&&(a.full=U([r],u,s));break;case"polygon":a.regularVertices=n,a.activeVertex=i,o>0&&(a.full=j([r],u,s,!0));break;case"circle":if(o>0){var l=I(this.view,r[0]);if(1===o&&t.operationComplete){var c=r[0],p=l.makeMapPoint(c[0]+tt*this.view.resolution,c[1]);a.full=Y([c,p],l,!0)}else 2===o&&(a.full=this.forceUniformSize?Y(r,l,this.centered):X(r,l,this.centered))}break;case"rectangle":if(o>0){var h=I(this.view,r[0]);if(1===o&&t.operationComplete){var d=r[0],f=h.makeMapPoint(d[0]+tt*this.view.resolution,d[1]);a.full=q([d,f],h,!0)}else 2===o&&(a.full=this.forceUniformSize?q(r,h,this.centered):N(r,h,this.centered))}break;default:return null}switch(this.geometryType){case"point":case"multipoint":break;case"polyline":case"polygon":o>1&&(a.outline=U([r],u,s));break;case"circle":case"rectangle":(0,v.pC)(a.full)&&"polygon"===a.full.type&&(a.outline=j(a.full.rings,u,s))}return a}},{key:"initializeGraphic",value:function(t){return null}},{key:"onComplete",value:function(t){this._updateGraphic();var e=null;if(this.drawOperation.isCompleted){var n=this._getCreateOperationGeometry({operationComplete:!0});(0,v.pC)(n)&&((0,v.Wi)(this._graphic)?this._createGraphic(n.full):this._graphic.geometry=n.full,e=(0,v.Wg)(this._graphic).clone())}this.emit("complete",(0,r.Z)({graphic:e},t))}},{key:"onCursorUpdate",value:function(t){this._updateGraphic(),this.emit("cursor-update",t)}},{key:"onDeactivate",value:function(){this.drawOperation.isCompleted||this.drawOperation.cancel()}},{key:"onVertexAdd",value:function(t){this._updateGraphic(),this.emit("vertex-add",t)}},{key:"onVertexRemove",value:function(t){this._updateGraphic(),this.emit("vertex-remove",t)}},{key:"onVertexUpdate",value:function(t){this._updateGraphic(),this.emit("vertex-update",t)}},{key:"_updateGraphic",value:function(){var t=this._getCreateOperationGeometry();(0,v.Wi)(t)?this._destroyAllVisualisations():((0,v.pC)(t.outline)?this.handles.add(this.onOutlineChanged(t.outline),K.outline):this.handles.remove(K.outline),(0,v.pC)(t.regularVertices)?this.handles.add(this.onRegularVerticesChanged(t.regularVertices),K.regularVertices):this.handles.remove(K.regularVertices),(0,v.pC)(t.activeVertex)?this.handles.add(this.onActiveVertexChanged(t.activeVertex),K.activeVertex):this.handles.remove(K.activeVertex),(0,v.pC)(t.full)?(0,v.Wi)(this._graphic)?this._createGraphic(t.full):this._graphic.geometry=t.full:this.handles.remove(Q))}}]),n}((0,p.p)(c.Z.EventedMixin(B.m)));(0,s._)([(0,d.Cb)({value:!0})],J.prototype,"centered",null),(0,s._)([(0,d.Cb)({nonNullable:!0})],J.prototype,"defaultZ",void 0),(0,s._)([(0,d.Cb)()],J.prototype,"drawOperation",void 0),(0,s._)([(0,d.Cb)({value:!0})],J.prototype,"enabled",null),(0,s._)([(0,d.Cb)({value:!0})],J.prototype,"forceUniformSize",null),(0,s._)([(0,d.Cb)({constructOnly:!0})],J.prototype,"geometryType",void 0),(0,s._)([(0,d.Cb)()],J.prototype,"graphic",null),(0,s._)([(0,d.Cb)({constructOnly:!0})],J.prototype,"graphicProperties",void 0),(0,s._)([(0,d.Cb)()],J.prototype,"graphicSymbol",null),(0,s._)([(0,d.Cb)({constructOnly:!0})],J.prototype,"hasZ",void 0),(0,s._)([(0,d.Cb)({constructOnly:!0})],J.prototype,"mode",void 0),(0,s._)([(0,d.Cb)()],J.prototype,"snappingManager",void 0),(0,s._)([(0,d.Cb)()],J.prototype,"snapToScene",void 0),(0,s._)([(0,d.Cb)({readOnly:!0})],J.prototype,"type",void 0),(0,s._)([(0,d.Cb)({readOnly:!0})],J.prototype,"updating",null),(0,s._)([(0,d.Cb)({constructOnly:!0,nonNullable:!0})],J.prototype,"view",void 0),J=(0,s._)([(0,y.j)("esri.views.draw.DrawGraphicTool")],J);var Q="create-operation-graphic",K={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};function $(t){switch(t){case"point":case"polyline":case"polygon":case"multipoint":return t;case"circle":case"rectangle":return"segment";default:return null}}var tt=48},36397:function(t,e,n){n.d(e,{w:function(){return B}});var r=n(1413),i=n(15671),a=n(43144),o=n(60136),u=n(54062),s=n(27366),l=n(91505),c=n(41691),p=n(84652),h=n(92026),v=n(66978),d=n(47898),f=n(94172),y=n(17842),g=n(68860),m=n(49861),_=(n(25243),n(69912)),x=n(70178),b=n(74509),w=n(50951),C="click",k=function(){function t(e){var n=e.grabbableForEvent;(0,i.Z)(this,t),this.events=new l.Z,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=n}return(0,a.Z)(t,[{key:"intersectionDistance",value:function(t,e){return 0}},{key:"attach",value:function(){}},{key:"detach",value:function(){}}]),t}(),Z=n(14813),T=n(74229),S=n(84954),M=n(87268),O=n(52349),E=n(61920),V=n(34019),R=n(80151),G=n(74165),P=n(15861),A=n(85015),W=(n(63780),n(93169),n(99912)),I=function(t){(0,o.Z)(n,t);var e=(0,u.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t)).stagedPoint=null,r._abortController=null,r._snap=(0,v.Ds)(function(){var t=(0,P.Z)((0,G.Z)().mark((function t(e,n,i,a){var o;return(0,G.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r._frameTask.schedule((function(){return n.snap(e,i,a)}),a);case 2:if(o=t.sent,t.t0=o.valid,!t.t0){t.next=7;break}return t.next=7,r._frameTask.schedule((function(){r.stagedPoint=o.apply(),e!==r._snapMapPoint&&(r.stagedPoint=n.update(r._snapMapPoint,i))}),a);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}()),r}return(0,a.Z)(n,[{key:"initialize",value:function(){var t,e,n="3d"===this.view.type?null===(t=this.view)||void 0===t||null===(e=t.resourceController)||void 0===e?void 0:e.scheduler:null;this._frameTask=(0,h.pC)(n)?n.registerTask(W.T8.SNAPPING):W.sq}},{key:"destroy",value:function(){this._abortController=(0,h.IM)(this._abortController),this._frameTask=(0,h.hw)(this._frameTask)}},{key:"snap",value:function(){var t=(0,P.Z)((0,G.Z)().mark((function t(e,n,r){return(0,G.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(this.stagedPoint=n.update(e,r),this._snapMapPoint=e,(0,h.Wi)(this._abortController)&&(this._abortController=new AbortController),this._snap(e,n,r,this._abortController.signal)));case 1:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"abort",value:function(){this._abortController=(0,h.IM)(this._abortController)}}]),n}(A.Z);(0,s._)([(0,m.Cb)({constructOnly:!0})],I.prototype,"view",void 0),(0,s._)([(0,m.Cb)()],I.prototype,"stagedPoint",void 0),I=(0,s._)([(0,_.j)("esri.views.interactive.snapping.SnappingOperation")],I);var D=n(4943),z=function(t){(0,o.Z)(n,t);var e=(0,u.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t)).type="draw-point",r}return(0,a.Z)(n)}(D.h);(0,s._)([(0,m.Cb)()],z.prototype,"type",void 0),(0,s._)([(0,m.Cb)()],z.prototype,"elevation",void 0),z=(0,s._)([(0,_.j)("esri.views.interactive.tooltip.DrawPointTooltipInfo")],z);var L=function(t){(0,o.Z)(n,t);var e=(0,u.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t)).type="draw-polyline",r}return(0,a.Z)(n)}(D.h);(0,s._)([(0,m.Cb)()],L.prototype,"type",void 0),(0,s._)([(0,m.Cb)()],L.prototype,"elevation",void 0),(0,s._)([(0,m.Cb)()],L.prototype,"totalLength",void 0),L=(0,s._)([(0,_.j)("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],L);var F=function(t){(0,o.Z)(n,t);var e=(0,u.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t)).type="draw-polygon",r}return(0,a.Z)(n)}(D.h);(0,s._)([(0,m.Cb)()],F.prototype,"type",void 0),(0,s._)([(0,m.Cb)()],F.prototype,"elevation",void 0),(0,s._)([(0,m.Cb)()],F.prototype,"area",void 0),F=(0,s._)([(0,_.j)("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],F);var H=n(72189),U=n(71353),j=n(21971),q=n(59418),N=n(12611);function Y(t,e){var n,r,i,a=function(t){return(0,q.Ul)(t,e)}(t),o=null!==(n=null===(r=t.paths[0])||void 0===r?void 0:r[(null===(i=t.paths[0])||void 0===i?void 0:i.length)-1])&&void 0!==n?n:null,u=t.hasZ,s=t.spatialReference,l=o?(0,U.f)(o[0],o[1],u?o[2]:0):null;return function(t){if((0,h.Wi)(t)||(0,h.Wi)(a)||(0,h.Wi)(l))return a;X[0]=t.x,X[1]=t.y,X[2]=u?t.z:0;var n=function(t,n,r){return(0,q.MU)(t,n,r,e)}(l,X,s);return(0,h.Wi)(n)?a:(0,d.yG)(a.value+n.value,a.unit)}}var X=(0,U.c)(),B=function(t){(0,o.Z)(n,t);var e=(0,u.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t))._createOperationCompleted=!1,r._pointerDownStates=new Set,r._snappingPipeline=new R.n,r._tooltip=null,r._tooltipContext={calculateElevation:null,calculateTotalLength:null,calculateArea:null},r.isDraped=!0,r.labelOptions=new O.Z,r.tooltipOptions=new E.Z,r.snapToSceneEnabled=null,(0,h.Wi)(t.elevationInfo)&&(r.elevationInfo={mode:t.hasZ?"absolute-height":"on-the-ground",offset:0}),r}return(0,a.Z)(n,[{key:"initialize",value:function(){var t=this,e=this.geometryType,n=this.view,i=n.spatialReference,a="viewingMode"in n.state?n.state.viewingMode:w.JY.Local,o="segment"===e||"multipoint"===e?"polyline":e;this.coordinateHelper=(0,Z.Y6)(this.hasZ,this.hasM,i),this._editGeometryOperations=new M.c(new S.XE(o,this.coordinateHelper)),this._snappingOperation=new I({view:n}),this.handles.add((0,f.YP)((function(){return t.stagedVertex}),(function(e,n){(0,h.pC)(t._tooltip)&&((0,h.pC)(n)!==(0,h.pC)(e)?t._tooltip.info=t._getTooltipInfo():t._updateTooltipInfo()),(0,h.Wi)(e)||t.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:t._activeComponent.vertices.length,coordinates:t.coordinateHelper.pointToArray(e)}],operation:"apply",type:"vertex-update"})}),{sync:!0,equals:function(t,e){return(0,h._W)(t,e,x.k)}})),this._activeComponent=new S.wA(i,a),this._editGeometryOperations.data.components.push(this._activeComponent);var u=this.segmentLabels;(0,h.pC)(u)&&(u.context={view:n,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.handles.add([(0,f.YP)((function(){return t.labelOptions.enabled}),(function(t){u.visible=t}),f.tX),this.on("cursor-update",(function(){var e=t.stagedVertex;u.stagedVertex=(0,h.pC)(e)?t.coordinateHelper.pointToVector(e):null}))])),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(function(e){var n=e.vertices.map((function(e){return{componentIndex:0,vertexIndex:e.index,coordinates:t.coordinateHelper.vectorToArray(e.pos)}})),i=n.map((function(t){return t.coordinates}));switch(e.type){case"vertex-add":t.emit(e.type,(0,r.Z)((0,r.Z)({},e),{},{added:i,vertices:n}));break;case"vertex-update":t.emit(e.type,(0,r.Z)((0,r.Z)({},e),{},{updated:i,vertices:n}));break;case"vertex-remove":t.emit(e.type,(0,r.Z)((0,r.Z)({},e),{},{removed:i,vertices:n}))}}))),this._manipulator=new k({grabbableForEvent:function(e){return"click"!==t.drawingMode||"touch"===e.pointerType&&t._snappingEnabled&&1===t._pointerDownStates.size}}),this.manipulators.add(this._manipulator),this._manipulator.grabbable="point"!==e,this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",(function(e){return t._onImmediateClick(e)})),this._manipulator.events.on("immediate-double-click",(function(e){return t._onImmediateDoubleClick(e)})),(0,f.YP)((function(){return t.tooltipOptions.enabled}),(function(e){t._tooltip=e?new H.u({view:n,info:t._getTooltipInfo()}):(0,h.SC)(t._tooltip)}),f.nn),this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(function(){return(0,h.yw)(t._tooltip,(function(e){e.info=t._getTooltipInfo()}))}))])}},{key:"destroy",value:function(){(0,h.SC)(this.segmentLabels),(0,h.SC)(this._snappingOperation),this._tooltip=(0,h.SC)(this._tooltip),this._editGeometryOperations=(0,h.SC)(this._editGeometryOperations)}},{key:"_snappingEnabled",get:function(){return(0,h.pC)(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}},{key:"_defaultElevation",get:function(){return(0,d.yG)(this.defaultZ,"meters")}},{key:"canRedo",get:function(){return this._editGeometryOperations.canRedo}},{key:"canUndo",get:function(){return this._editGeometryOperations.canUndo}},{key:"committedVertices",get:function(){var t=this;return this._activeComponent.vertices.map((function(e){return t.coordinateHelper.vectorToArray(e.pos)}))}},{key:"drawingMode",set:function(t){this._set("drawingMode",null!==t&&void 0!==t?t:C)}},{key:"interactive",get:function(){return this._manipulator.interactive},set:function(t){this._manipulator.interactive=t}},{key:"isCompleted",get:function(){return this._createOperationCompleted}},{key:"numCommittedVertices",get:function(){return this._activeComponent.vertices.length}},{key:"numVertices",get:function(){return(0,h.pC)(this.stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}},{key:"stagedVertex",get:function(){return this._snappingOperation.stagedPoint},set:function(t){this._snappingOperation.stagedPoint=(0,p.d9)(t)}},{key:"updating",get:function(){return this.updatingHandles.updating}},{key:"vertices",get:function(){var t=this.committedVertices;return(0,h.pC)(this.stagedVertex)&&t.push(this.coordinateHelper.pointToArray(this.stagedVertex)),t}},{key:"stagedOrLastVertex",get:function(){if((0,h.pC)(this.stagedVertex))return this.stagedVertex;var t=this._activeComponent.getLastVertex();return(0,h.Wi)(t)?null:this._editGeometryOperations.data.coordinateHelper.vectorToDehydratedPoint(t.pos)}},{key:"cancel",value:function(){this.complete({aborted:!0})}},{key:"commitStagedVertex",value:function(){if(this._snappingOperation.abort(),(0,h.pC)(this.stagedVertex)){var t=this.stagedVertex;this.stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(t))}}},{key:"complete",value:function(t){var e=t&&t.aborted||!1;this._snappingOperation.abort(),(0,h.pC)(this.snappingManager)&&this.snappingManager.doneSnapping(),"segment"===this.geometryType||"point"===this.geometryType?this.commitStagedVertex():this.stagedVertex=null;var n="multipoint"===this.geometryType&&0===this.numVertices||"polyline"===this.geometryType&&this.numVertices<2||"polygon"===this.geometryType&&this.numVertices<3;this._createOperationCompleted=!n,(this.isCompleted||e)&&this.emit("complete",{vertices:this.vertices.map((function(t,e){return{componentIndex:0,vertexIndex:e,coordinates:t}})),aborted:e,type:"complete"})}},{key:"onInputEvent",value:function(t){switch(t.type){case"pointer-down":this._pointerDownStates.add(t.pointerId);break;case"pointer-up":this._pointerDownStates.delete(t.pointerId)}switch(t.type){case"pointer-move":return this._onPointerMove(t);case"hold":return this._onHold(t)}}},{key:"redo",value:function(){this._editGeometryOperations.redo()}},{key:"undo",value:function(){(0,h.pC)(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}},{key:"_closeOnClickVertexIndex",value:function(t){var e=this._activeComponent;if("polygon"===this.geometryType&&e.vertices.length>2){if(this._vertexWithinPointerDistance(e.vertices[0].pos,t))return 0;if(this._vertexWithinPointerDistance(e.vertices[e.vertices.length-1].pos,t))return e.vertices.length-1}return null}},{key:"_createManipulatorDragPipeline",value:function(t){switch((0,h.Wg)(this.drawingMode)){case"click":return this._createManipulatorDragPipelineClick(t);case"freehand":return this._createManipulatorDragPipelineFreehand(t);case"hybrid":return this._createManipulatorDragPipelineHybrid(t)}}},{key:"_createManipulatorDragPipelineClick",value:function(t){var e=this;return(0,T.Xd)(t,(function(t,n,r,i){var a="touch"===i&&e._snappingEnabled;!e.isCompleted&&a&&(n.next(e._screenToMapDragEventStep()).next((function(t){return"start"===t.action&&(e.stagedVertex=t.mapStart,("segment"===e.geometryType||a&&0===e.numVertices)&&e.commitStagedVertex()),t})).next(e._snappingPipeline.createSnapDragEventPipelineStep({predicate:function(){return a},cancel:r,snappingManager:e.snappingManager,snappingContext:new V.N({editGeometryOperations:e._editGeometryOperations,elevationInfo:e.elevationInfo,pointer:i,visualizer:e.snappingVisualizer}),updatingHandles:e.updatingHandles}),e._snappingPipeline.next).next((function(t){return a&&(e.stagedVertex=t.mapEnd,"end"===t.action&&e.commitStagedVertex()),t})).next((function(t){return"end"===t.action&&("segment"!==e.geometryType&&"point"!==e.geometryType||e.complete()),t})),r.next((function(){a&&(0,h.pC)(e.snappingManager)&&e.snappingManager.doneSnapping()})))}))}},{key:"_createManipulatorDragPipelineFreehand",value:function(t){var e=this;return(0,T.Xd)(t,(function(t,n){e.isCompleted||n.next(e._screenToMapDragEventStep()).next((function(t){return"start"===t.action&&((0,h.Wi)(e.stagedVertex)&&(e.stagedVertex=t.mapStart),"segment"===e.geometryType&&e.commitStagedVertex()),t})).next((function(t){switch(t.action){case"start":case"update":e.stagedVertex=t.mapEnd,"polygon"!==e.geometryType&&"polyline"!==e.geometryType||e.commitStagedVertex();break;case"end":e.complete()}return t}))}))}},{key:"_createManipulatorDragPipelineHybrid",value:function(t){var e=this;return(0,T.Xd)(t,(function(t,n){e.isCompleted||n.next(e._screenToMapDragEventStep()).next((function(t){return"start"===t.action&&((0,h.Wi)(e.stagedVertex)&&(e.stagedVertex=t.mapStart),e.commitStagedVertex()),t})).next((function(t){switch(t.action){case"start":case"update":e.stagedVertex=t.mapEnd,"polygon"!==e.geometryType&&"polyline"!==e.geometryType||e.commitStagedVertex();break;case"end":"segment"!==e.geometryType&&"point"!==e.geometryType||e.complete()}return t}))}))}},{key:"_getDrawSurface",value:function(){if((0,h.Wi)(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ)return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;var t=this.defaultZ,e=!1;(0,h.pC)(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(e=!0),(0,h.pC)(this.snapToSceneEnabled)&&(e=this.snapToSceneEnabled),(0,h.pC)(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(e=!1);var n=this._activeComponent.vertices.length;return("segment"===this.geometryType||"polygon"===this.geometryType)&&n>0&&(t=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),e=!1),e?this.drawSurface:(this.elevationDrawSurface.defaultZ=t,this.elevationDrawSurface)}},{key:"_mapToScreen",value:function(t){return this._getDrawSurface().mapToScreen(t)}},{key:"_onHold",value:function(t){this._snappingOperation.abort(),"click"===this.drawingMode&&"touch"===t.pointerType&&this._snappingEnabled&&(this.stagedVertex=t.mapPoint),t.stopPropagation()}},{key:"_onImmediateClick",value:function(t){if(!("mouse"===t.pointerType&&2===t.button||this._manipulator.dragging)){var e=this._activeComponent,n=this._closeOnClickVertexIndex(t.screenPoint);if((0,h.pC)(n))return t.stopPropagation(),void this.complete();var r=this._screenToMap(t.screenPoint);if((0,h.pC)(r))switch(this.drawingMode){case"freehand":"point"===this.geometryType&&((0,h.pC)(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(r)),this.complete());break;case"click":case"hybrid":this._snappingOperation.abort(),(0,h.pC)(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(r)),("point"===this.geometryType||"segment"===this.geometryType&&2===e.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===e.vertices.length)&&this.complete()}t.stopPropagation()}}},{key:"_onImmediateDoubleClick",value:function(t){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),t.stopPropagation())}},{key:"_onPointerMove",value:function(t){var e=(0,y.vW)(t.x,t.y);if(this._manipulator.dragging||this._pointerDownStates.has(t.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)this._snappingOperation.abort();else{t.stopPropagation();var n=this._closeOnClickVertexIndex(e);if((0,h.pC)(n))return this._closeOnVertex(n),void this._snappingOperation.abort();var r=this._screenToMap(e);if(this._manipulator.cursor=(0,h.pC)(r)?"crosshair":null,(0,h.Wi)(r))this._snappingOperation.abort();else{if((0,h.Wi)(this.snappingManager))return this.stagedVertex=r,void this._snappingOperation.abort();var i=this.snappingManager,a=new V.N({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:t.pointerType,visualizer:this.snappingVisualizer});this.updatingHandles.addPromise((0,v.R8)(this._snappingOperation.snap(r,i,a)))}}}},{key:"_closeOnVertex",value:function(t){this.stagedVertex=null;var e={componentIndex:0,vertexIndex:t,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[t].pos)};this.emit("cursor-update",{updated:null,vertices:[e],operation:"apply",type:"vertex-update"})}},{key:"_screenToMap",value:function(t){return this._getDrawSurface().screenToMap(t)}},{key:"_screenToMapDragEventStep",value:function(){var t=this,e=null;return function(n){if("start"===n.action&&(e=t._screenToMap(n.screenStart)),(0,h.Wi)(e))return null;var i=t._screenToMap(n.screenEnd);return(0,h.pC)(i)?(0,r.Z)((0,r.Z)({},n),{},{mapStart:e,mapEnd:i}):null}}},{key:"_vertexWithinPointerDistance",value:function(t,e){var n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(t));return!!(0,h.pC)(n)&&function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*r+i*i<=n}(n,e,25)}},{key:"_calculateVertexTooltipElevation",value:function(t){var e=this.tooltipOptions,n=this.view;if((0,h.Wi)(t)||"2d"===n.type)return this._defaultElevation;var r=this.elevationInfo,i=e.elevation.mode,a=t.spatialReference,o=(0,g._R)(a),u=(0,b.vQ)(n,t,r,{mode:i,offset:0});return(0,d.yG)(u*o,"meters")}},{key:"_getTooltipInfo",value:function(){var t=this,e=this.tooltipOptions,n=this.stagedOrLastVertex;if((0,h.Wi)(n))return null;this._tooltipContext.calculateElevation=function(e){return t._calculateVertexTooltipElevation(e)};var r=this._elevationTooltipDetail(n);switch(this.geometryType){case"point":return new z({tooltipOptions:e,elevation:r});case"polyline":return this._tooltipContext.calculateTotalLength=Y(this._editGeometryOperations.data.geometry,this.isDraped?"on-the-ground":"absolute-height"),new L({tooltipOptions:e,elevation:r,totalLength:this._totalLengthTooltipDetail(n)});case"polygon":return this._tooltipContext.calculateArea=function(t,e){var n=(0,N.ln)(),r=function(t){return(0,j.M)(t,e,n)};return function(e){if((0,h.Wi)(e)||t.rings.length<1||t.rings[0].length<2)return r(t);var n=t.clone();return n.rings[0].push([e.x,e.y]),r(n)}}(this._editGeometryOperations.data.geometry,this.isDraped),new F({tooltipOptions:e,elevation:r,area:this._areaTooltipDetail(n)});default:return null}}},{key:"_elevationTooltipDetail",value:function(t){return(0,r.Z)({mode:this.elevationInfo.mode},(0,h.Wg)(this._tooltipContext.calculateElevation)(t))}},{key:"_totalLengthTooltipDetail",value:function(t){return(0,r.Z)({},(0,h.Pt)((0,h.Wg)(this._tooltipContext.calculateTotalLength)(t),(0,d.yG)(0,"meters")))}},{key:"_areaTooltipDetail",value:function(t){return(0,r.Z)({},(0,h.Pt)((0,h.Wg)(this._tooltipContext.calculateArea)(t),(0,d.ne)(0,"square-meters")))}},{key:"_updateTooltipInfo",value:function(){var t=this._tooltip;if(!(0,h.Wi)(t)){var e=this.stagedOrLastVertex,n=this._elevationTooltipDetail(e);switch(this.geometryType){case"point":t.info.elevation=n;break;case"polyline":var r=t.info;r.elevation=n,r.totalLength=this._totalLengthTooltipDetail(e);break;case"polygon":var i=t.info;i.elevation=n,i.area=this._areaTooltipDetail(e)}}}},{key:"test",get:function(){return{tooltip:this._tooltip}}}]),n}(l.Z.EventedMixin(c.r));(0,s._)([(0,m.Cb)()],B.prototype,"_defaultElevation",null),(0,s._)([(0,m.Cb)()],B.prototype,"defaultZ",void 0),(0,s._)([(0,m.Cb)()],B.prototype,"isDraped",void 0),(0,s._)([(0,m.Cb)({value:C})],B.prototype,"drawingMode",null),(0,s._)([(0,m.Cb)({constructOnly:!0})],B.prototype,"elevationDrawSurface",void 0),(0,s._)([(0,m.Cb)({constructOnly:!0})],B.prototype,"elevationInfo",void 0),(0,s._)([(0,m.Cb)({constructOnly:!0,type:O.Z})],B.prototype,"labelOptions",void 0),(0,s._)([(0,m.Cb)({constructOnly:!0,type:E.Z})],B.prototype,"tooltipOptions",void 0),(0,s._)([(0,m.Cb)({constructOnly:!0})],B.prototype,"geometryType",void 0),(0,s._)([(0,m.Cb)({constructOnly:!0})],B.prototype,"hasM",void 0),(0,s._)([(0,m.Cb)({constructOnly:!0})],B.prototype,"hasZ",void 0),(0,s._)([(0,m.Cb)({constructOnly:!0})],B.prototype,"manipulators",void 0),(0,s._)([(0,m.Cb)({constructOnly:!0})],B.prototype,"drawSurface",void 0),(0,s._)([(0,m.Cb)({constructOnly:!0})],B.prototype,"segmentLabels",void 0),(0,s._)([(0,m.Cb)({constructOnly:!0})],B.prototype,"snappingManager",void 0),(0,s._)([(0,m.Cb)({constructOnly:!0})],B.prototype,"snappingVisualizer",void 0),(0,s._)([(0,m.Cb)()],B.prototype,"snapToSceneEnabled",void 0),(0,s._)([(0,m.Cb)()],B.prototype,"_snappingOperation",void 0),(0,s._)([(0,m.Cb)()],B.prototype,"stagedVertex",null),(0,s._)([(0,m.Cb)()],B.prototype,"updating",null),(0,s._)([(0,m.Cb)({constructOnly:!0})],B.prototype,"view",void 0),B=(0,s._)([(0,_.j)("esri.views.draw.DrawOperation")],B)},54016:function(t,e,n){n.d(e,{aL:function(){return l},hP:function(){return p},iW:function(){return c}});var r=n(15671),i=n(43144),a=n(92026),o=n(17842),u=n(65618),s=n(74509),l=function(){function t(e,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;(0,r.Z)(this,t),this.elevationInfo=e,this.defaultZ=n,this.view=i,this.excludeGraphics=a}return(0,i.Z)(t,[{key:"screenToMap",value:function(t){if((0,a.pC)(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen((0,o.s1)(t.x,t.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);var e=this.view.sceneIntersectionHelper.intersectElevationFromScreen((0,o.s1)(t.x,t.y),this.elevationInfo,0,this.excludeGraphics);return(0,a.pC)(e)&&(e.z=void 0),e}},{key:"mapToScreen",value:function(t){var e=(0,u.Tx)(t.x,t.y,(0,s.vQ)(this.view,t,this.elevationInfo),t.spatialReference);return this.view.toScreen(e)}}]),t}(),c=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];(0,r.Z)(this,t),this.view=e,this.elevationInfo=n,this.exclude=i}return(0,i.Z)(t,[{key:"screenToMap",value:function(t){var e=this.view.toMap(t,{exclude:this.exclude});return(0,a.pC)(e)&&(e.z=(0,s.Ou)(e,this.view,this.elevationInfo)),e}},{key:"mapToScreen",value:function(t){var e=t;return(0,a.pC)(this.elevationInfo)&&(e=(0,u.Tx)(t.x,t.y,(0,s.vQ)(this.view,t,this.elevationInfo),t.spatialReference)),this.view.toScreen(e)}}]),t}(),p=(0,i.Z)((function t(e){(0,r.Z)(this,t),this.view=e,this.screenToMap=function(t){return e.toMap(t)},this.mapToScreen=function(t){return e.toScreen(t)}}))},29919:function(t,e,n){n.d(e,{m:function(){return b}});var r,i=n(15671),a=n(43144),o=n(60136),u=n(54062),s=n(27366),l=n(85015),c=n(32718),p=n(92026),h=n(66978),v=n(49861),d=(n(63780),n(93169),n(25243),n(69912)),f=n(6384),y=n(99034),g=n(37762),m=n(40281);!function(t){t[t.WhenToolEditable=0]="WhenToolEditable",t[t.WhenToolNotEditable=1]="WhenToolNotEditable",t[t.Always=2]="Always"}(r||(r={}));var _=function(){function t(){(0,i.Z)(this,t),this._isToolEditable=!0,this._manipulators=new m.Z,this._nextManipulatorId=0,this._resourceContexts={manipulator3D:{}},this._attached=!1}return(0,a.Z)(t,[{key:"isToolEditable",set:function(t){this._isToolEditable=t}},{key:"length",get:function(){return this._manipulators.length}},{key:"add",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.WhenToolEditable;return this.addMany([t],e)[0]}},{key:"addMany",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.WhenToolEditable;return t.map((function(t){var r=e._nextManipulatorId++,i={id:r,manipulator:t,visibilityPredicate:n,attached:!1};return e._manipulators.add(i),e._attached&&e._updateManipulatorAttachment(i),r}))}},{key:"remove",value:function(t){if("number"==typeof t){for(var e=t,n=0;n<this._manipulators.length;n++)if(this._manipulators.getItemAt(n).id===e){var r=this._manipulators.splice(n,1)[0];return this._detachManipulator(r),r.id}return null}for(var i=t,a=0;a<this._manipulators.length;a++)if(this._manipulators.getItemAt(a).manipulator===i){var o=this._manipulators.splice(a,1)[0];return this._detachManipulator(o),o.id}return null}},{key:"removeAll",value:function(){var t=this;this._manipulators.forEach((function(e){t._detachManipulator(e)})),this._manipulators.removeAll()}},{key:"attach",value:function(){var t=this;this._manipulators.forEach((function(e){t._updateManipulatorAttachment(e)})),this._attached=!0}},{key:"detach",value:function(){var t=this;this._manipulators.forEach((function(e){t._detachManipulator(e)})),this._attached=!1}},{key:"destroy",value:function(){this._manipulators.forEach((function(t){var e=t.manipulator;e.destroy&&e.destroy()})),this._manipulators.destroy(),this._resourceContexts=null}},{key:"on",value:function(t,e){return this._manipulators.on(t,(function(t){e(t)}))}},{key:"forEach",value:function(t){var e,n=(0,g.Z)(this._manipulators.items);try{for(n.s();!(e=n.n()).done;){t(e.value)}}catch(r){n.e(r)}finally{n.f()}}},{key:"some",value:function(t){return this._manipulators.items.some(t)}},{key:"toArray",value:function(){var t=[];return this.forEach((function(e){return t.push(e.manipulator)})),t}},{key:"intersect",value:function(t,e){var n=null,r=Number.MAX_VALUE;return this._manipulators.forEach((function(i){var a=i.id,o=i.manipulator;if(i.attached&&o.interactive){var u=o.intersectionDistance(t,e);(0,p.pC)(u)&&u<r&&(r=u,n={id:a,manipulator:o})}})),n}},{key:"findById",value:function(t){if((0,p.Wi)(t))return null;var e,n=(0,g.Z)(this._manipulators.items);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(t===r.id)return r.manipulator}}catch(i){n.e(i)}finally{n.f()}return null}},{key:"_updateManipulatorAttachment",value:function(t){this._isManipulatorItemVisible(t)?this._attachManipulator(t):this._detachManipulator(t)}},{key:"_attachManipulator",value:function(t){t.attached||(t.manipulator.attach&&t.manipulator.attach(this._resourceContexts),t.attached=!0)}},{key:"_detachManipulator",value:function(t){if(t.attached){var e=t.manipulator;e.grabbing=!1,e.dragging=!1,e.hovering=!1,e.selected=!1,e.detach&&e.detach(this._resourceContexts),t.attached=!1}}},{key:"_isManipulatorItemVisible",value:function(t){return t.visibilityPredicate===r.Always||(this._isToolEditable?t.visibilityPredicate===r.WhenToolEditable:t.visibilityPredicate===r.WhenToolNotEditable)}}]),t}(),x=c.Z.getLogger("esri.views.interactive.InteractiveToolBase"),b=function(t){(0,o.Z)(n,t);var e=(0,u.Z)(n);function n(t){var r;return(0,i.Z)(this,n),(r=e.call(this,t)).manipulators=new _,r.preferManipulatorCursor=!1,r.automaticManipulatorSelection=!0,r.hasFocusedManipulators=!1,r.created=!1,r.removeIncompleteOnCancel=!0,r._editableFlags=new Map([[y.bH.MANAGER,!0],[y.bH.USER,!0]]),r._creationFinishedResolver=(0,h.hh)(),r}return(0,a.Z)(n,[{key:"active",get:function(){return null!=this.view&&this.view.activeTool===this}},{key:"visible",set:function(t){this._get("visible")!==t&&(this._set("visible",t),this._syncVisible())}},{key:"editable",get:function(){return this.getEditableFlag(y.bH.USER)},set:function(t){this.setEditableFlag(y.bH.USER,t)}},{key:"updating",get:function(){return!1}},{key:"cursor",get:function(){return null}},{key:"destroy",value:function(){this.manipulators.destroy(),this._set("view",null)}},{key:"onAdd",value:function(){this._syncVisible()}},{key:"activate",value:function(){(0,p.Wi)(this.view)?x.error("Can't activate tool if view is not defined."):((0,f.t)(this.view)&&this.view.focus(),this.onActivate())}},{key:"deactivate",value:function(){this.onDeactivate()}},{key:"handleInputEvent",value:function(t){this.onInputEvent(t)}},{key:"handleInputEventAfter",value:function(t){this.onInputEventAfter(t)}},{key:"setEditableFlag",value:function(t,e){this._editableFlags.set(t,e),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),t===y.bH.USER&&this.notifyChange("editable"),this.onEditableChange()}},{key:"getEditableFlag",value:function(t){return this._editableFlags.get(t)}},{key:"whenCreated",value:function(){return this._creationFinishedResolver.promise}},{key:"onActivate",value:function(){}},{key:"onDeactivate",value:function(){}},{key:"onShow",value:function(){}},{key:"onHide",value:function(){}},{key:"onEditableChange",value:function(){}},{key:"onInputEvent",value:function(t){}},{key:"onInputEventAfter",value:function(t){}},{key:"internallyEditable",get:function(){return this.getEditableFlag(y.bH.USER)&&this.getEditableFlag(y.bH.MANAGER)}},{key:"finishToolCreation",value:function(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}},{key:"_syncVisible",value:function(){if(this.constructed)if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}},{key:"_show",value:function(){this._updateManipulatorAttachment(),this.onShow()}},{key:"_hide",value:function(){this._updateManipulatorAttachment(),this.onHide()}},{key:"_updateManipulatorAttachment",value:function(){this.visible?this.manipulators.attach():this.manipulators.detach()}}]),n}(l.Z);(0,s._)([(0,v.Cb)({constructOnly:!0})],b.prototype,"view",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],b.prototype,"active",null),(0,s._)([(0,v.Cb)({value:!0})],b.prototype,"visible",null),(0,s._)([(0,v.Cb)({value:!0})],b.prototype,"editable",null),(0,s._)([(0,v.Cb)({readOnly:!0})],b.prototype,"manipulators",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],b.prototype,"updating",null),(0,s._)([(0,v.Cb)()],b.prototype,"cursor",null),(0,s._)([(0,v.Cb)({readOnly:!0})],b.prototype,"preferManipulatorCursor",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],b.prototype,"automaticManipulatorSelection",void 0),(0,s._)([(0,v.Cb)()],b.prototype,"hasFocusedManipulators",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],b.prototype,"created",void 0),(0,s._)([(0,v.Cb)({readOnly:!0})],b.prototype,"removeIncompleteOnCancel",void 0),b=(0,s._)([(0,d.j)("esri.views.interactive.InteractiveToolBase")],b)},74229:function(t,e,n){n.d(e,{AN:function(){return k},M2:function(){return g},QY:function(){return C},Xd:function(){return y},a9:function(){return m},bD:function(){return w},hM:function(){return S},kY:function(){return T},oq:function(){return x},zh:function(){return Z}});var r=n(15671),i=n(43144),a=n(1413),o=n(37762),u=(n(59486),n(84652)),s=n(16889),l=n(92026),c=n(17842),p=n(71353),h=n(79803),v=n(50951),d=n(20008),f=n(7882);function y(t,e){return t.events.on("drag",function(t,e){var n=null,r=null;return function(i){if("cancel"!==i.action){var a={action:i.action,screenStart:i.start,screenEnd:i.screenPoint};"start"===i.action&&(0,l.Wi)(n)&&(n=new S,r=new S,e(t,n,r,i.pointerType,a)),(0,l.pC)(n)&&n.execute(a),"end"===i.action&&(0,l.pC)(n)&&(n=null,r=null)}else(0,l.pC)(r)&&(r.execute({action:"cancel"}),n=null,r=null)}}(t,e))}function g(t,e){var n=[t.x,t.y,t.z],r=e,i=[Math.cos(r),Math.sin(r)],a=Math.sqrt(i[0]*i[0]+i[1]*i[1]);if(0===a)return null;i[0]/=a,i[1]/=a;var o=function(t){var e=(t.x-n[0])*i[0]+(t.y-n[1])*i[1];t.x=n[0]+e*i[0],t.y=n[1]+e*i[1]};return function(t){return o(t.mapStart),o(t.mapEnd),t}}function m(t,e){var n=null;return function(r){if("start"===r.action&&(n=function(t,e,n){var r=t.geometry;if((0,l.Wi)(r))return null;if("mesh"===r.type)return function(t,e,n,r){if((0,l.pC)(e.transform))return function(t,e,n,r){var i=_(n.getOriginPoint(e.spatialReference),r),a=e.spatialReference;return(0,l.Wi)(i)?null:{move:function(e,r,o){var u=(0,d.pB)(i.clone(),e,r,o);if(u.spatialReference.equals(a))n.origin=(0,p.f)(u.x,u.y,u.z);else{var s=(0,h.iV)(u,a);(0,l.pC)(s)&&(n.origin=(0,p.f)(s.x,s.y,s.z))}t.notifyMeshTransformChanged(),t.notifyGeometryChanged()}}}(t,e,e.transform,n);if(!e.spatialReference.equals(n))return null;var i=0,a=0,o=0;return{move:function(n,u,s){var l=n-i,c=u-a,p=s-o;if(l||c||p){var h=new f.Z(e.origin.x+l,e.origin.y+c,e.origin.z+p,e.origin.spatialReference);e.centerAt(h,{geographic:r===v.JY.Global}),t.notifyGeometryChanged(),i=n,a=u,o=s}}}}(t,r,e,n);var i=_(r,e),a=r.spatialReference;return(0,l.Wi)(i)?null:{move:function(e,n,r){var o=(0,d.pB)(i.clone(),e,n,r);o.spatialReference.equals(a)?t.geometry=o:t.geometry=(0,h.iV)(o,a)}}}(t,r.mapStart.spatialReference,e)),(0,l.Wi)(n))return null;var i=r.mapEnd.x-r.mapStart.x,o=r.mapEnd.y-r.mapStart.y,u=r.mapEnd.z-r.mapStart.z;return n.move(i,o,u),(0,a.Z)((0,a.Z)({},r),{},{translationX:i,translationY:o,translationZ:u})}}function _(t,e){return(0,l.Wi)(t)?null:t.spatialReference.equals(e)?t.clone():(0,h.iV)(t,e)}function x(t,e){var n=t.map((function(t){return(0,l.Wg)(m(t,e))})).filter((function(t){return(0,l.pC)(t)}));return function(t){var e=t.mapEnd.x-t.mapStart.x,r=t.mapEnd.y-t.mapStart.y,i=t.mapEnd.z-t.mapStart.z;return n.forEach((function(e){return e(t)})),(0,a.Z)((0,a.Z)({},t),{},{translationX:e,translationY:r,translationZ:i})}}function b(t,e){var n,r=new Map,i=(0,o.Z)(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r.set(a,(0,u.d9)(t[a]))}}catch(s){i.e(s)}finally{i.f()}return function(e){return r.forEach((function(e,n){t[n]=e})),e}}function w(t){return(0,l.pC)(t.geometry)&&"mesh"===t.geometry.type?function(t,e){var n=(0,l.pC)(e.transform)?e.transform.clone():null,r=e.vertexAttributes.clonePositional();return function(i){return e.transform=n,e.vertexAttributes=r,t.notifyGeometryChanged(),i}}(t,t.geometry):b(t,["geometry"])}function C(t){var e=t.map((function(t){return(0,l.Wg)(w(t))})).filter((function(t){return(0,l.pC)(t)}));return function(t){return e.forEach((function(e){return e(t)})),t}}function k(){var t=0,e=0,n=0;return function(r){"start"===r.action&&(t=r.mapStart.x,e=r.mapStart.y,n=r.mapStart.z);var i=r.mapEnd.x-t,o=r.mapEnd.y-e,u=r.mapEnd.z-n;return t=r.mapEnd.x,e=r.mapEnd.y,n=r.mapEnd.z,(0,a.Z)((0,a.Z)({},r),{},{mapDeltaX:i,mapDeltaY:o,mapDeltaZ:u,mapDeltaSpatialReference:r.mapStart.spatialReference})}}function Z(){var t=0,e=0;return function(n){"start"===n.action&&(t=n.screenStart.x,e=n.screenStart.y);var r=n.screenEnd.x-t,i=n.screenEnd.y-e;return t=n.screenEnd.x,e=n.screenEnd.y,(0,a.Z)((0,a.Z)({},n),{},{screenDeltaX:r,screenDeltaY:i})}}function T(t,e){var n=null,r=0,i=0;return function(a){if("start"===a.action&&((n=t.toScreen(e)).x<0||n.x>t.width||n.y<0||n.y>t.height?n=null:(r=a.screenStart.x-n.x,i=a.screenStart.y-n.y)),null==n)return null;var o=(0,s.uZ)(a.screenEnd.x-r,0,t.width),u=(0,s.uZ)(a.screenEnd.y-i,0,t.height),l=(0,c.vW)(o,u);return a.screenStart=n,a.screenEnd=l,a}}var S=function(){function t(){(0,r.Z)(this,t),this.execute=function(){}}return(0,i.Z)(t,[{key:"next",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new t;return(0,l.pC)(e)&&(this.execute=function(t){var r=e(t);(0,l.pC)(r)&&n.execute(r)}),n}}]),t}()},80151:function(t,e,n){n.d(e,{n:function(){return d}});var r=n(1413),i=n(74165),a=n(15861),o=n(15671),u=n(43144),s=n(92026),l=n(66978),c=n(70178),p=n(74229),h=n(34019),v=n(99912),d=function(){function t(){(0,o.Z)(this,t),this.next=new p.hM}return(0,u.Z)(t,[{key:"createSnapDragEventPipelineStep",value:function(t){var e=this,n=t.predicate,o=void 0===n?function(){return!0}:n,u=t.cancel,d=t.snappingManager,f=t.snappingContext,y=t.updatingHandles;if((0,s.Wi)(d))return function(t){return t};var g=null,m=null,_=function(){g=(0,s.IM)(g),d.doneSnapping(),(0,s.pC)(m)&&m.frameTask.remove(),m=null};u.next((function(t){return _(),t})),this.next=new p.hM;var x,b,w=(0,l.Ds)(function(){var t=(0,a.Z)((0,i.Z)().mark((function t(n,r){var a,o,u,s,l,p,h,v;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.frameTask,o=n.point,u=n.context,s=n.event,l=n.dx,p=n.dy,t.next=3,a.schedule((function(){return d.snap(o,u,r)}),r);case 3:if(!(h=t.sent).valid){t.next=9;break}return t.next=7,a.schedule((function(){return h.apply()}),r);case 7:v=t.sent,o!==x&&(v=d.update(x,u)),(0,c.k)(v,b)||(s.mapEnd.x=v.x+l,s.mapEnd.y=v.y+p,e.next.execute(s));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());return function(t){if(!o(t))return t;if("start"===t.action){var e="3d"===d.view.type?d.view.resourceController.scheduler.registerTask(v.T8.SNAPPING):v.sq;m={context:new h.N({editGeometryOperations:f.editGeometryOperations,elevationInfo:f.elevationInfo,pointer:f.pointer,vertexHandle:(0,s.pC)(t.info)?t.info.handle:null,excludeFeature:f.excludeFeature,visualizer:f.visualizer}),originalPos:(0,s.pC)(t.snapOrigin)?f.coordinateHelper.vectorToDehydratedPoint(t.snapOrigin):t.mapStart,frameTask:e}}if((0,s.pC)(m)){var n=m.context.coordinateHelper.vectorToDehydratedPoint(m.context.coordinateHelper.arrayToVector([m.originalPos.x,m.originalPos.y,m.originalPos.z]));n.x+=t.mapEnd.x-t.mapStart.x,n.y+=t.mapEnd.y-t.mapStart.y;var i=t.mapStart.x-m.originalPos.x,a=t.mapStart.y-m.originalPos.y,u=(0,r.Z)((0,r.Z)({},t),{},{action:"update"}),c=m.context,p=d.update(n,m.context);if(b=p,t.mapEnd.x=p.x+i,t.mapEnd.y=p.y+a,x=n,"end"!==t.action){var C=m.frameTask;(0,s.pC)(g)||(g=new AbortController),y.addPromise((0,l.R8)(w({frameTask:C,event:u,context:c,point:n,dx:i,dy:a},g.signal)))}}return"end"===t.action&&_(),t}}}]),t}()},4943:function(t,e,n){n.d(e,{h:function(){return p}});var r=n(43144),i=n(15671),a=n(60136),o=n(54062),u=n(27366),s=n(85015),l=n(49861),c=(n(63780),n(93169),n(25243),n(69912)),p=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(t){return(0,i.Z)(this,n),e.call(this,t)}return(0,r.Z)(n)}(s.Z);(0,u._)([(0,l.Cb)()],p.prototype,"tooltipOptions",void 0),p=(0,u._)([(0,c.j)("esri.views.interactive.tooltip.SketchTooltipInfo")],p)},72189:function(t,e,n){n.d(e,{u:function(){return $}});var r=n(15671),i=n(43144),a=n(60136),o=n(54062),u=n(27366),s=n(85015),l=n(92026),c=n(94172),p=n(49861),h=(n(63780),n(93169),n(25243),n(69912)),v="esri-tooltip",d="".concat(v,"-content"),f=(n(32718),n(75366),n(59166),n(58935)),y=n(68860),g=n(69407),m=n(80975),_=n(80532),x=n(6291),b=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){var t;return(0,r.Z)(this,n),(t=e.apply(this,arguments))._messagesUnits=null,t._messagesTooltip=null,t}return(0,i.Z)(n,[{key:"_units",get:function(){var t=(0,y.RG)(this.tooltip.view);return{length:t,verticalLength:t,area:t}}},{key:"_formatScale",value:function(t){return(0,x.uf)(t,{style:"percent",maximumFractionDigits:0})}},{key:"_formatRelativeOrientation",value:function(t){return(0,x.uf)(t,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})}},{key:"_formatLength",value:function(t,e,n){return(0,f.N9)(this._messagesUnits,t,(0,l.Pt)(e,this._units.length),n)}},{key:"_formatRelativeLength",value:function(t){return(0,f.i_)(this._messagesUnits,t,this._units.length)}},{key:"_formatVerticalLength",value:function(t){return(0,f.ym)(this._messagesUnits,t,this._units.verticalLength)}},{key:"_formatRelativeVerticalLength",value:function(t){return(0,f.Pr)(this._messagesUnits,t,this._units.verticalLength)}},{key:"_formatTotalLength",value:function(t){return(0,f.N9)(this._messagesUnits,t,this._units.length)}},{key:"_formatArea",value:function(t){return(0,f.Se)(this._messagesUnits,t,this._units.area)}},{key:"_formatPercentage",value:function(t){return(0,x.uf)(t.value,{style:"percent"})}}]),n}(g.Z);(0,u._)([(0,p.Cb)()],b.prototype,"info",void 0),(0,u._)([(0,p.Cb)()],b.prototype,"tooltip",void 0),(0,u._)([(0,p.Cb)()],b.prototype,"_units",null),(0,u._)([(0,_.H)("esri/core/t9n/Units"),(0,p.Cb)()],b.prototype,"_messagesUnits",void 0),(0,u._)([(0,_.H)("esri/views/interactive/tooltip/t9n/Tooltip"),(0,p.Cb)()],b.prototype,"_messagesTooltip",void 0),b=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.content.TooltipContent")],b);var w=n(67005),C="".concat(v,"-field"),k={base:C,title:"".concat(C,"__title"),value:"".concat(C,"__value")},Z=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){return(0,w.u)("div",{class:k.base},(0,w.u)("div",{class:k.title},this.title),(0,w.u)("div",{class:k.value},this.value))}}]),n}(g.Z);(0,u._)([(0,p.Cb)()],Z.prototype,"title",void 0),(0,u._)([(0,p.Cb)()],Z.prototype,"value",void 0),Z=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.support.TooltipField")],Z);var T={base:"".concat(d," ","".concat(d,"--draw-point"))},S=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var t,e=this.info.elevation,n=null===(t=this._messagesTooltip)||void 0===t?void 0:t.sketch;return(0,w.u)("div",{class:T.base},(0,w.u)(Z,{title:null===n||void 0===n?void 0:n.elevation,value:this._formatVerticalLength(e)}))}}]),n}(b);S=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],S);var M={base:"".concat(d," ","".concat(d,"--draw-polygon"))},O=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var t,e=this.info,n=e.area,r=e.elevation,i=null===(t=this._messagesTooltip)||void 0===t?void 0:t.sketch;return(0,w.u)("div",{class:M.base},(0,w.u)(Z,{title:null===i||void 0===i?void 0:i.elevation,value:this._formatVerticalLength(r)}),(0,w.u)(Z,{title:null===i||void 0===i?void 0:i.area,value:this._formatArea(n)}))}}]),n}(b);O=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],O);var E={base:"".concat(d," ","".concat(d,"--draw-polyline"))},V=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var t,e=this.info,n=e.elevation,r=e.totalLength,i=null===(t=this._messagesTooltip)||void 0===t?void 0:t.sketch;return(0,w.u)("div",{class:E.base},(0,w.u)(Z,{title:null===i||void 0===i?void 0:i.elevation,value:this._formatVerticalLength(n)}),(0,w.u)(Z,{title:null===i||void 0===i?void 0:i.totalLength,value:this._formatLength(r)}))}}]),n}(b);V=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],V);var R={base:"".concat(d," ","".concat(d,"--extent-rotate"))},G=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var t,e=this.info.angle,n=null===(t=this._messagesTooltip)||void 0===t?void 0:t.sketch;return(0,w.u)("div",{class:R.base},(0,w.u)(Z,{title:null===n||void 0===n?void 0:n.rotation,value:this._formatRelativeOrientation(e)}))}}]),n}(b);G=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],G);var P={base:"".concat(v,"-value-by-value")},A=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){var t;return(0,r.Z)(this,n),(t=e.apply(this,arguments)).divider="\xd7",t}return(0,i.Z)(n,[{key:"render",value:function(){return(0,w.u)("div",{class:P.base},(0,w.u)("span",null,this.left),(0,w.u)("span",null,this.divider),(0,w.u)("span",null,this.right))}}]),n}(g.Z);(0,u._)([(0,p.Cb)()],A.prototype,"left",void 0),(0,u._)([(0,p.Cb)()],A.prototype,"divider",void 0),(0,u._)([(0,p.Cb)()],A.prototype,"right",void 0),A=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.support.ValueByValue")],A);var W={base:"".concat(d," ","".concat(d,"--extent-scale"))},I=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var t,e=this.info,n=e.xScale,r=e.yScale,i=e.xSize,a=e.ySize,o=null===(t=this._messagesTooltip)||void 0===t?void 0:t.sketch;return(0,w.u)("div",{class:W.base},(0,w.u)(Z,{title:null===o||void 0===o?void 0:o.size,value:(0,w.u)(A,{left:this._formatLength(i),right:this._formatLength(a)})}),(0,w.u)(Z,{title:null===o||void 0===o?void 0:o.scale,value:(0,w.u)(A,{left:this._formatScale(n),right:this._formatScale(r)})}))}}]),n}(b);I=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],I);var D={base:"".concat(d," ","".concat(d,"--reshape-edge-offset"))},z=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var t,e=this.info.distance,n=null===(t=this._messagesTooltip)||void 0===t?void 0:t.sketch;return(0,w.u)("div",{class:D.base},(0,w.u)(Z,{title:null===n||void 0===n?void 0:n.distance,value:this._formatRelativeLength(e)}))}}]),n}(b);z=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],z);var L={base:"".concat(d," ","".concat(d,"--reshape-move-graphic"))},F=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var t,e=this.info.distance,n=null===(t=this._messagesTooltip)||void 0===t?void 0:t.sketch;return(0,w.u)("div",{class:L.base},(0,w.u)(Z,{title:null===n||void 0===n?void 0:n.distance,value:this._formatLength(e)}))}}]),n}(b);F=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.content.TooltipContentReshapeMoveGraphic")],F);var H={base:"".concat(d," ","".concat(d,"--transform-absolute"))},U=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var t,e=this.info,n=e.orientation,r=e.orientationEnabled,i=e.orientationPrecision,a=e.rotationType,o=e.size,u=e.sizeEnabled,s=e.sizeUnit,l=e.sizePrecision,c=null===(t=this._messagesTooltip)||void 0===t?void 0:t.sketch;return(0,w.u)("div",{class:H.base},r&&(0,w.u)(Z,{title:null===c||void 0===c?void 0:c.orientation,value:(0,f.cy)(n,a,i)}),u&&(0,w.u)(Z,{title:null===c||void 0===c?void 0:c.size,value:this._formatLength(o,s,l)}))}}]),n}(b);U=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],U);var j={base:"".concat(d," ","".concat(d,"--transform-rotate"))},q=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var t,e=this.info,n=e.rotation,r=e.rotationPrecision,i=e.orientation,a=e.orientationPrecision,o=e.rotationType,u=null===(t=this._messagesTooltip)||void 0===t?void 0:t.sketch;return(0,w.u)("div",{class:j.base},(0,w.u)(Z,{title:null===u||void 0===u?void 0:u.rotation,value:(0,f.SP)(n,o,r)}),(0,w.u)(Z,{title:null===u||void 0===u?void 0:u.orientation,value:(0,f.cy)(i,o,a)}))}}]),n}(b);q=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],q);var N={base:"".concat(d," ","".concat(d,"--transform-scale"))},Y=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var t,e=this.info,n=e.scale,r=e.size,i=e.sizePrecision,a=e.sizeUnit,o=null===(t=this._messagesTooltip)||void 0===t?void 0:t.sketch;return(0,w.u)("div",{class:N.base},(0,w.u)(Z,{title:null===o||void 0===o?void 0:o.scale,value:this._formatPercentage(n)}),(0,w.u)(Z,{title:null===o||void 0===o?void 0:o.size,value:this._formatLength(r,a,i)}))}}]),n}(b);Y=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],Y);var X={base:"".concat(d," ","".concat(d,"--translate-vertex"))},B=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var t,e=this.info,n=e.area,r=e.distance,i=e.elevation,a=e.totalLength,o=null===(t=this._messagesTooltip)||void 0===t?void 0:t.sketch;return(0,w.u)("div",{class:X.base},(0,w.u)(Z,{title:null===o||void 0===o?void 0:o.distance,value:this._formatLength(r)}),(0,l.pC)(i)&&(0,w.u)(Z,{title:null===o||void 0===o?void 0:o.elevation,value:this._formatVerticalLength(i)}),(0,l.pC)(n)&&(0,w.u)(Z,{title:null===o||void 0===o?void 0:o.area,value:this._formatArea(n)}),(0,l.pC)(a)&&(0,w.u)(Z,{title:null===o||void 0===o?void 0:o.totalLength,value:this._formatLength(a)}))}}]),n}(b);B=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],B);var J={base:"".concat(d," ","".concat(d,"--extent-move-z"))},Q=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(){return(0,r.Z)(this,n),e.apply(this,arguments)}return(0,i.Z)(n,[{key:"render",value:function(){var t,e=this.info.distance,n=null===(t=this._messagesTooltip)||void 0===t?void 0:t.sketch;return(0,w.u)("div",{class:J.base},(0,w.u)(Z,{title:null===n||void 0===n?void 0:n.distance,value:this._formatRelativeVerticalLength(e)}))}}]),n}(b);Q=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.content.TooltipContentTranslateZ")],Q);var K={base:"".concat(v)},$=function(t){(0,a.Z)(n,t);var e=(0,o.Z)(n);function n(t){var i;return(0,r.Z)(this,n),(i=e.call(this,t)).info=null,i._contentContainer=function(){var t=document.createElement("div");return t.classList.add(K.base),t}(),i._contentWidget=null,i}return(0,i.Z)(n,[{key:"initialize",value:function(){var t=this,e=this._contentContainer;this.own([(0,c.YP)((function(){var e;return null===(e=t.view.overlay)||void 0===e?void 0:e.surface}),(function(t){e.remove(),(0,l.yw)(t,(function(t){return t.appendChild(e)}))}),c.tX),(0,c.YP)((function(){return t.info}),(function(n,r){(0,l.pC)(t._contentWidget)&&(0,l.pC)(n)&&(0,l.pC)(r)&&n.type===r.type?t._contentWidget.info=n:(t._contentWidget=(0,l.SC)(t._contentWidget),(0,l.yw)(function(t,e){if((0,l.Wi)(e))return null;var n=document.createElement("div");switch(e.type){case"draw-point":return new S({tooltip:t,info:e,container:n});case"draw-polygon":return new O({tooltip:t,info:e,container:n});case"draw-polyline":return new V({tooltip:t,info:e,container:n});case"extent-rotate":return new G({tooltip:t,info:e,container:n});case"extent-scale":return new I({tooltip:t,info:e,container:n});case"reshape-edge-offset":return new z({tooltip:t,info:e,container:n});case"transform-absolute":return new U({tooltip:t,info:e,container:n});case"transform-rotate":return new q({tooltip:t,info:e,container:n});case"transform-scale":return new Y({tooltip:t,info:e,container:n});case"translate-graphic":return new F({tooltip:t,info:e,container:n});case"translate-vertex":return new B({tooltip:t,info:e,container:n});case"translate-z":return new Q({tooltip:t,info:e,container:n})}}(t,n),(function(n){t._contentWidget=n,e.appendChild(n.container)})))}),c.tX),(0,c.YP)((function(){var e;return{container:t._contentContainer,contentWidget:t._contentWidget,screenPoint:null===(e=t.view.inputManager)||void 0===e?void 0:e.latestPointerLocation}}),tt,c.tX)])}},{key:"destroy",value:function(){this._contentWidget=(0,l.SC)(this._contentWidget),this._contentContainer.remove()}},{key:"clear",value:function(){this.info=null}},{key:"test",get:function(){return{contentContainer:this._contentContainer}}}]),n}(s.Z);function tt(t){var e=t.container,n=t.contentWidget,r=t.screenPoint,i=e.style;if((0,l.pC)(r)&&(0,l.pC)(n)){i.display="block";var a=(0,m.dZ)(e),o="translate(".concat(Math.round(r.x)+et[0]*(a?-1:1),"px, ").concat(Math.round(r.y)+et[1],"px)");i.transform=a?"translate(-100%, 0) ".concat(o):o}else i.display="none"}(0,u._)([(0,p.Cb)({nonNullable:!0})],$.prototype,"view",void 0),(0,u._)([(0,p.Cb)()],$.prototype,"info",void 0),(0,u._)([(0,p.Cb)()],$.prototype,"_contentContainer",void 0),(0,u._)([(0,p.Cb)()],$.prototype,"_contentWidget",void 0),$=(0,u._)([(0,h.j)("esri.views.interactive.tooltip.Tooltip")],$);var et=[20,20]},21971:function(t,e,n){n.d(e,{M:function(){return f}});var r=n(92026),i=n(12611),a=(n(59486),n(47898)),o=n(2170),u=n(79803),s=n(15559),l=n(47072),c=n(78952);function p(t){var e=t.spatialReference;return(0,l.T)(e,h,v,d,t)}function h(t){return(0,a.ne)(Math.abs((0,s.p8)([t],"square-meters")[0]),"square-meters")}function v(t){try{return(0,a.ne)(Math.abs((0,o.geodesicArea)(t,"square-meters")),"square-meters")}catch(e){return null}}function d(t){var e=[];return(0,u.K2)(t,e)?(0,a.ne)(Math.abs((0,s.p8)([{type:"polygon",rings:e,spatialReference:c.Z.WGS84}],"square-meters")[0]),"square-meters"):null}function f(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.ln)();if(e){var a=p(t);return(0,r.pC)(a)?a:(0,i.X)(t,n)}return(0,i.oN)(t,n)}},59418:function(t,e,n){n.d(e,{GQ:function(){return s},MU:function(){return u},Ul:function(){return o},bZ:function(){return l}});var r=n(92026),i=n(4914),a=n(13615);function o(t,e){return c(i.qS,a.kQ,i.Sx,e,t)}function u(t,e,n,r){return c(i.FN,a.FB,i.qj,r,t,e,n)}function s(t,e,n){return c(i.xI,a.RT,i.xI,n,t,e)}function l(t,e,n,r){return c(i.qj,a.FB,i.qj,r,t,e,n)}function c(t,e,n,i){for(var a=arguments.length,o=new Array(a>4?a-4:0),u=4;u<a;u++)o[u-4]=arguments[u];if("on-the-ground"===i){var s=e.apply(void 0,o);return(0,r.pC)(s)?s:n.apply(void 0,o)}return t.apply(void 0,o)}},12611:function(t,e,n){n.d(e,{X:function(){return y},ln:function(){return _},oN:function(){return f}});var r=n(37762),i=n(92026),a=n(47898),o=n(68860),u=n(79347),s=n(11186),l=n(71353),c=n(79803),p=n(55652),h=n(74702),v=n(11185),d=n(25003);function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{positionsWorldCoords:[]};return g(t,e)}function y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{positionsWorldCoords:[]};return g(t,e,!1)}function g(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.hasZ,u=(0,d.m)(t.spatialReference),f=(0,o.oq)(u);if((0,i.Wi)(f))return null;var y,g=function(t,e){return!(e.length<2)&&((0,s.s)(t,e[0],e[1],n&&e[2]||0),!0)},_=0,b=(0,r.Z)(t.rings);try{for(b.s();!(y=b.n()).done;){var w=y.value;if(!(w.length<3)){for(var C=e.positionsWorldCoords;C.length<w.length;)C.push((0,l.c)());for(var k=m,Z=0;Z<3;Z++){if(!g(k,w[Z]))return null;if(!(0,c.SH)(k,t.spatialReference,C[Z],u))return null}if(!((0,s.k)(C[0],C[1])||(0,s.k)(C[0],C[2])||(0,s.k)(C[1],C[2]))){for(var T=(0,p.zk)(C[0],C[1],C[2],(0,p.re)()),S=(0,s.c)(v.WM.get(),C[0]),M=0;M<3;M++)(0,p.tx)(T,S,C[M],C[M]);for(var O=3;O<w.length;O++){if(!g(k,w[O]))return null;(0,c.SH)(k,t.spatialReference,C[O],u),(0,p.tx)(T,S,C[O],C[O])}for(var E=x(C),V=0;V<E.length;V+=3)_+=(0,h.wu)(C[E[V]],C[E[V+1]],C[E[V+2]])}}}}catch(R){b.e(R)}finally{b.f()}return(0,a.ne)(_,f)}var m=(0,l.c)();function _(){return{positionsWorldCoords:[]}}function x(t){return(0,u.e)(function(t){for(var e=new Float64Array(2*t.length),n=0;n<t.length;++n){var r=t[n],i=2*n;e[i+0]=r[0],e[i+1]=r[1]}return e}(t),[],2)}},4914:function(t,e,n){n.d(e,{Cr:function(){return x},FN:function(){return m},Sx:function(){return v},_e:function(){return y},g1:function(){return g},qS:function(){return h},qj:function(){return _},xI:function(){return f}});var r=n(37762),i=n(92026),a=n(47898),o=n(68860),u=n(11186),s=n(71353),l=n(79803),c=n(92975),p=n(25003);function h(t){return d(t,"direct")}function v(t){return d(t,"horizontal")}function d(t,e){var n=t.hasZ,u=t.spatialReference,s=(0,p.m)(u),l=0,c=(0,o.j5)(s);if((0,i.Wi)(c))return null;var h,v="direct"===e?m:_,d=(0,r.Z)(t.paths);try{for(d.s();!(h=d.n()).done;){var f=h.value;if(!(f.length<2))for(var y=f.length-1,g=0;g<y;++g){var x=f[g];w[0]=x[0],w[1]=x[1],w[2]=n?x[2]:0;var b=f[g+1];C[0]=b[0],C[1]=b[1],C[2]=n?b[2]:0;var k=v(w,C,u);if((0,i.Wi)(k))return null;l+=k.value}}}catch(Z){d.e(Z)}finally{d.f()}return(0,a.yG)(l,c)}function f(t,e){var n=t.spatialReference;return(0,c.fS)(n,e.spatialReference)?(w[0]=t.x,w[1]=t.y,w[2]=t.hasZ?t.z:0,C[0]=e.x,C[1]=e.y,C[2]=e.hasZ?e.z:0,_(w,C,n)):null}function y(t,e){var n=t.spatialReference;return(0,c.fS)(n,e.spatialReference)?(w[0]=t.x,w[1]=t.y,w[2]=t.hasZ?t.z:0,C[0]=e.x,C[1]=e.y,C[2]=e.hasZ?e.z:0,x(w,C,n)):null}function g(t){return w[0]=t.x,w[1]=t.y,w[2]=t.hasZ?t.z:0,function(t,e){var n=(0,o.y)(e);return(0,i.pC)(n)?(0,a.yG)(t[2],n):null}(w,t.spatialReference)}function m(t,e,n){var r=b(t,e,n,"direct");return(0,i.pC)(r)?(0,a.yG)(r.direct,r.unit):null}function _(t,e,n){var r=b(t,e,n,"horizontal");return(0,i.pC)(r)?(0,a.yG)(r.horizontal,r.unit):null}function x(t,e,n){var r=b(t,e,n,"vertical");return(0,i.pC)(r)?(0,a.yG)(r.verticalSigned,r.unit):null}function b(t,e,n,r){var a=(0,p.m)(n),s=(0,o.j5)(a);if((0,i.Wi)(s))return null;var c=e[2]-t[2];if("vertical"===r)return{verticalSigned:c,unit:s};if(!(0,l.SH)(t,n,k,a)||!(0,l.SH)(e,n,Z,a))return null;if("direct"===r)return{direct:(0,u.i)(Z,k),unit:s};if((0,u.s)(T,t[0],t[1],e[2]),!(0,l.SH)(T,n,T,a))return null;var h=(0,u.i)(T,Z);return"horizontal"===r?{horizontal:h,unit:s}:{direct:(0,u.i)(Z,k),horizontal:h,vertical:Math.abs(c),unit:s}}var w=(0,s.c)(),C=(0,s.c)(),k=(0,s.c)(),Z=(0,s.c)(),T=(0,s.c)()},13615:function(t,e,n){n.d(e,{FB:function(){return v},RT:function(){return h},kQ:function(){return p}});var r=n(93433),i=n(47898),a=n(71353),o=n(2170),u=n(79803),s=n(15559),l=n(92975),c=n(47072);function p(t){var e=t.spatialReference;return(0,c.T)(e,g,m,_,t)}function h(t,e){if(!(0,l.fS)(t.spatialReference,e.spatialReference))return null;var n=t.spatialReference;return b[0]=t.x,b[1]=t.y,b[2]=t.hasZ?t.z:0,w[0]=e.x,w[1]=e.y,w[2]=e.hasZ?e.z:0,v(b,w,n)}function v(t,e,n){return(0,c.T)(n,d,f,y,t,e,n)}function d(t,e,n){return(0,i.yG)((0,s.cA)(x,t,e,n).distance,"meters")}function f(t,e,n){return(0,i.yG)((0,o.geodesicLength)(function(t,e,n){return{type:"polyline",spatialReference:n,paths:[[(0,r.Z)(t),(0,r.Z)(e)]]}}(t,e,n),"meters"),"meters")}function y(t,e,n){return(0,u.ke)(t,n,C)&&(0,u.ke)(e,n,k)?(0,i.yG)((0,s.cA)(x,C,k).distance,"meters"):null}function g(t){return(0,i.yG)((0,s.Jf)([t],"meters")[0],"meters")}function m(t){return(0,i.yG)((0,o.geodesicLength)(t,"meters"),"meters")}function _(t){var e=[];if(!(0,u.bi)(t,e))return null;for(var n=0,r=0,a=e;r<a.length;r++){for(var o=a[r],l=0,c=1;c<o.length;++c)l+=(0,s.cA)(x,o[c-1],o[c]).distance;n+=l}return(0,i.yG)(n,"meters")}var x={distance:null},b=(0,a.c)(),w=(0,a.c)(),C=(0,a.c)(),k=(0,a.c)()},47072:function(t,e,n){n.d(e,{T:function(){return a}});var r=n(15559),i=n(92975);function a(t,e,n,a){for(var o=arguments.length,u=new Array(o>4?o-4:0),s=4;s<o;s++)u[s-4]=arguments[s];return(0,i.sT)(t)&&(0,r.Gb)(t)?e.apply(void 0,u):(0,i.sS)(t)?n.apply(void 0,u):a.apply(void 0,u)}},25003:function(t,e,n){n.d(e,{m:function(){return a}});var r=n(79803),i=n(92183);function a(t){var e=(0,i.rS)(t),n=e===i.GG?i.wY:e;return(0,r.Up)(t,n)?n:t}}}]);
//# sourceMappingURL=2114.75508c08.chunk.js.map