{"version":3,"file":"static/js/5856.f65844a0.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/FetchAssociatedFeatureLayer.js","../node_modules/@arcgis/core/layers/support/I3SLayerDefinitions.js","../node_modules/@arcgis/core/layers/support/capabilities.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{id as t}from\"../../kernel.js\";import r from\"../../request.js\";import{isNone as e,isSome as a}from\"../../core/maybe.js\";import{throwIfAbortError as s}from\"../../core/promiseUtils.js\";import i from\"../FeatureLayer.js\";import o from\"../../portal/Portal.js\";import n from\"../../portal/PortalItem.js\";class l{constructor(t,r,e,a){this.parsedUrl=t,this.portalItem=r,this.apiKey=e,this.signal=a,this.rootDocument=null;const s=this.parsedUrl.path.match(/^(.*)\\/SceneServer\\/layers\\/([\\d]*)\\/?$/i);s&&(this.urlParts={root:s[1],layerId:parseInt(s[2],10)})}async fetch(){if(!this.urlParts)return null;const t=this.portalItem??await this._portalItemFromServiceItemId();if(e(t))return this._loadFromUrl();const r=await this._findAndLoadRelatedPortalItem(t);return e(r)?null:this._loadFeatureLayerFromPortalItem(r)}async fetchPortalItem(){if(!this.urlParts)return null;const t=this.portalItem??await this._portalItemFromServiceItemId();return e(t)?null:this._findAndLoadRelatedPortalItem(t)}async _fetchRootDocument(){if(a(this.rootDocument))return this.rootDocument;if(e(this.urlParts))return this.rootDocument={},{};const t={query:{f:\"json\",token:this.apiKey},responseType:\"json\",signal:this.signal},s=`${this.urlParts.root}/SceneServer`;try{const e=await r(s,t);this.rootDocument=e.data}catch{this.rootDocument={}}return this.rootDocument}async _fetchServiceOwningPortalUrl(){const e=t?.findServerInfo(this.parsedUrl.path);if(e?.owningSystemUrl)return e.owningSystemUrl;const a=this.parsedUrl.path.replace(/(.*\\/rest)\\/.*/i,\"$1\")+\"/info\";try{const t=(await r(a,{query:{f:\"json\"},responseType:\"json\",signal:this.signal})).data.owningSystemUrl;if(t)return t}catch(i){s(i)}return null}async _findAndLoadRelatedPortalItem(t){try{return(await t.fetchRelatedItems({relationshipType:\"Service2Service\",direction:\"reverse\"},{signal:this.signal})).find((t=>\"Feature Service\"===t.type))||null}catch(r){return s(r),null}}async _loadFeatureLayerFromPortalItem(t){await t.load({signal:this.signal});const r=await this._findMatchingAssociatedSublayerUrl(t.url);return new i({url:r,portalItem:t}).load({signal:this.signal})}async _loadFromUrl(){const t=await this._findMatchingAssociatedSublayerUrl(`${this.urlParts.root}/FeatureServer`);return new i({url:t}).load({signal:this.signal})}async _findMatchingAssociatedSublayerUrl(t){const e=t.replace(/^(.*FeatureServer)(\\/[\\d]*\\/?)?$/i,\"$1\"),a={query:{f:\"json\"},responseType:\"json\",authMode:\"no-prompt\",signal:this.signal},s=this.urlParts.layerId,i=this._fetchRootDocument(),o=r(e,a),[n,l]=await Promise.all([o,i]),c=l&&l.layers,h=n.data&&n.data.layers;if(!Array.isArray(h))throw new Error(\"expected layers array\");if(Array.isArray(c))for(let r=0;r<Math.min(c.length,h.length);r++){if(c[r].id===s)return`${e}/${h[r].id}`}else if(s<h.length)return`${e}/${h[s].id}`;throw new Error(\"could not find matching associated sublayer\")}async _portalItemFromServiceItemId(){const t=(await this._fetchRootDocument()).serviceItemId;if(!t)return null;const r=new n({id:t,apiKey:this.apiKey}),e=await this._fetchServiceOwningPortalUrl();a(e)&&(r.portal=new o({url:e}));try{return r.load({signal:this.signal})}catch(i){return s(i),null}}}export{l as FetchAssociatedFeatureLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{JSONSupport as t}from\"../../core/JSONSupport.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{enumeration as r}from\"../../core/accessorSupport/decorators/enumeration.js\";import{subclass as p}from\"../../core/accessorSupport/decorators/subclass.js\";let s=class extends t{constructor(){super(...arguments),this.nodesPerPage=null,this.rootIndex=0,this.lodSelectionMetricType=null}};e([o({type:Number})],s.prototype,\"nodesPerPage\",void 0),e([o({type:Number})],s.prototype,\"rootIndex\",void 0),e([o({type:String})],s.prototype,\"lodSelectionMetricType\",void 0),s=e([p(\"esri.layer.support.I3SNodePageDefinition\")],s);let i=class extends t{constructor(){super(...arguments),this.factor=1}};e([o({type:Number,json:{read:{source:\"textureSetDefinitionId\"}}})],i.prototype,\"id\",void 0),e([o({type:Number})],i.prototype,\"factor\",void 0),i=e([p(\"esri.layer.support.I3SMaterialTexture\")],i);let a=class extends t{constructor(){super(...arguments),this.baseColorFactor=[1,1,1,1],this.baseColorTexture=null,this.metallicRoughnessTexture=null,this.metallicFactor=1,this.roughnessFactor=1}};e([o({type:[Number]})],a.prototype,\"baseColorFactor\",void 0),e([o({type:i})],a.prototype,\"baseColorTexture\",void 0),e([o({type:i})],a.prototype,\"metallicRoughnessTexture\",void 0),e([o({type:Number})],a.prototype,\"metallicFactor\",void 0),e([o({type:Number})],a.prototype,\"roughnessFactor\",void 0),a=e([p(\"esri.layer.support.I3SMaterialPBRMetallicRoughness\")],a);let l=class extends t{constructor(){super(...arguments),this.alphaMode=\"opaque\",this.alphaCutoff=.25,this.doubleSided=!1,this.cullFace=\"none\",this.normalTexture=null,this.occlusionTexture=null,this.emissiveTexture=null,this.emissiveFactor=null,this.pbrMetallicRoughness=null}};e([r({opaque:\"opaque\",mask:\"mask\",blend:\"blend\"})],l.prototype,\"alphaMode\",void 0),e([o({type:Number})],l.prototype,\"alphaCutoff\",void 0),e([o({type:Boolean})],l.prototype,\"doubleSided\",void 0),e([r({none:\"none\",back:\"back\",front:\"front\"})],l.prototype,\"cullFace\",void 0),e([o({type:i})],l.prototype,\"normalTexture\",void 0),e([o({type:i})],l.prototype,\"occlusionTexture\",void 0),e([o({type:i})],l.prototype,\"emissiveTexture\",void 0),e([o({type:[Number]})],l.prototype,\"emissiveFactor\",void 0),e([o({type:a})],l.prototype,\"pbrMetallicRoughness\",void 0),l=e([p(\"esri.layer.support.I3SMaterialDefinition\")],l);let n=class extends t{};e([o({type:String,json:{read:{source:[\"name\",\"index\"],reader:(e,t)=>null!=e?e:`${t.index}`}}})],n.prototype,\"name\",void 0),e([r({jpg:\"jpg\",png:\"png\",dds:\"dds\",\"ktx-etc2\":\"ktx-etc2\",ktx2:\"ktx2\",basis:\"basis\"})],n.prototype,\"format\",void 0),n=e([p(\"esri.layer.support.I3STextureFormat\")],n);let u=class extends t{constructor(){super(...arguments),this.atlas=!1}};e([o({type:[n]})],u.prototype,\"formats\",void 0),e([o({type:Boolean})],u.prototype,\"atlas\",void 0),u=e([p(\"esri.layer.support.I3STextureSetDefinition\")],u);let y=class extends t{};e([r({Float32:\"Float32\",UInt64:\"UInt64\",UInt32:\"UInt32\",UInt16:\"UInt16\",UInt8:\"UInt8\"})],y.prototype,\"type\",void 0),e([o({type:Number})],y.prototype,\"component\",void 0),y=e([p(\"esri.layer.support.I3SGeometryAttribute\")],y);let d=class extends t{};e([r({draco:\"draco\"})],d.prototype,\"encoding\",void 0),e([o({type:[String]})],d.prototype,\"attributes\",void 0),d=e([p(\"esri.layer.support.I3SGeometryCompressedAttributes\")],d);let c=class extends t{constructor(){super(...arguments),this.offset=0}};e([o({type:Number})],c.prototype,\"offset\",void 0),e([o({type:y})],c.prototype,\"position\",void 0),e([o({type:y})],c.prototype,\"normal\",void 0),e([o({type:y})],c.prototype,\"uv0\",void 0),e([o({type:y})],c.prototype,\"color\",void 0),e([o({type:y})],c.prototype,\"uvRegion\",void 0),e([o({type:y})],c.prototype,\"featureId\",void 0),e([o({type:y})],c.prototype,\"faceRange\",void 0),e([o({type:d})],c.prototype,\"compressedAttributes\",void 0),c=e([p(\"esri.layer.support.I3SGeometryBuffer\")],c);let m=class extends t{};e([r({triangle:\"triangle\"})],m.prototype,\"topology\",void 0),e([o()],m.prototype,\"geometryBuffers\",void 0),m=e([p(\"esri.layer.support.I3SGeometryDefinition\")],m);export{y as I3SGeometryAttribute,c as I3SGeometryBuffer,d as I3SGeometryCompressedAttributes,m as I3SGeometryDefinition,l as I3SMaterialDefinition,a as I3SMaterialPBRMetallicRoughness,i as I3SMaterialTexture,s as I3SNodePageDefinition,n as I3STextureFormat,u as I3STextureSetDefinition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nconst t={analytics:{supportsCacheHint:!1},attachment:{supportsContentType:!1,supportsExifInfo:!1,supportsKeywords:!1,supportsName:!1,supportsSize:!1,supportsCacheHint:!1,supportsResize:!1},data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},query:{maxRecordCount:0,maxRecordCountFactor:0,standardMaxRecordCount:0,supportsCacheHint:!1,supportsCentroid:!1,supportsCompactGeometry:!1,supportsDefaultSpatialReference:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsSqlExpression:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsStatistics:!1,tileMaxRecordCount:0}};export{t as zeroCapabilities};\n"],"names":["l","t","r","e","a","this","parsedUrl","portalItem","apiKey","signal","rootDocument","s","path","match","urlParts","root","layerId","parseInt","_portalItemFromServiceItemId","_loadFromUrl","_findAndLoadRelatedPortalItem","_loadFeatureLayerFromPortalItem","query","f","token","responseType","data","owningSystemUrl","replace","fetchRelatedItems","relationshipType","direction","find","type","load","_findMatchingAssociatedSublayerUrl","url","i","authMode","_fetchRootDocument","o","Promise","all","n","c","layers","h","Array","isArray","Error","Math","min","length","id","serviceItemId","_fetchServiceOwningPortalUrl","portal","arguments","nodesPerPage","rootIndex","lodSelectionMetricType","Number","prototype","String","p","factor","json","read","source","baseColorFactor","baseColorTexture","metallicRoughnessTexture","metallicFactor","roughnessFactor","alphaMode","alphaCutoff","doubleSided","cullFace","normalTexture","occlusionTexture","emissiveTexture","emissiveFactor","pbrMetallicRoughness","opaque","mask","blend","Boolean","none","back","front","reader","index","jpg","png","dds","ktx2","basis","u","atlas","y","Float32","UInt64","UInt32","UInt16","UInt8","d","draco","offset","m","triangle","analytics","supportsCacheHint","attachment","supportsContentType","supportsExifInfo","supportsKeywords","supportsName","supportsSize","supportsResize","isVersioned","supportsAttachment","supportsM","supportsZ","editing","supportsDeleteByAnonymous","supportsDeleteByOthers","supportsGeometryUpdate","supportsGlobalId","supportsReturnServiceEditsInSourceSpatialReference","supportsRollbackOnFailure","supportsUpdateByAnonymous","supportsUpdateByOthers","supportsUpdateWithoutM","supportsUploadWithItemId","metadata","supportsAdvancedFieldProperties","operations","supportsCalculate","supportsTruncate","supportsValidateSql","supportsAdd","supportsDelete","supportsEditing","supportsChangeTracking","supportsQuery","supportsQueryAnalytics","supportsQueryAttachments","supportsQueryTopFeatures","supportsResizeAttachments","supportsSync","supportsUpdate","supportsExceedsLimitStatistics","queryRelated","supportsCount","supportsOrderBy","supportsPagination","queryTopFeatures","maxRecordCount","maxRecordCountFactor","standardMaxRecordCount","supportsCentroid","supportsCompactGeometry","supportsDefaultSpatialReference","supportsDisjointSpatialRelationship","supportsDistance","supportsDistinct","supportsExtent","supportsFormatPBF","supportsGeometryProperties","supportsHavingClause","supportsHistoricMoment","supportsMaxRecordCountFactor","supportsPercentileStatistics","supportsQuantization","supportsQuantizationEditMode","supportsQueryByOthers","supportsQueryGeometry","supportsResultType","supportsSqlExpression","supportsStandardizedQueriesOnly","supportsTopFeaturesQuery","supportsSpatialAggregationStatistics","supportedSpatialAggregationStatistics","envelope","centroid","convexHull","supportsStatistics","tileMaxRecordCount"],"sourceRoot":""}