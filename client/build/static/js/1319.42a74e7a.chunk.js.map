{"version":3,"file":"static/js/1319.42a74e7a.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/2d/layers/BitmapTileLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/TileLayerView2D.js","../node_modules/@arcgis/core/views/layers/TileLayerView.js","../node_modules/@arcgis/core/views/2d/layers/support/imageUtils.js","../node_modules/@arcgis/core/views/layers/RefreshableLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import\"../../../core/Logger.js\";import\"../../../core/accessorSupport/ensureType.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/set.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{BitmapTileContainer as t}from\"../engine/BitmapTileContainer.js\";const r=r=>{let s=class extends r{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new t(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView?.removeAllChildren()}};return s=e([i(\"esri.views.2d.layers.BitmapTileLayerView2D\")],s),s};export{r as BitmapTileLayerView2D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{watch as s}from\"../../../core/reactiveUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/has.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{equals as a}from\"../../../geometry/support/spatialReferenceUtils.js\";import{BitmapTileLayerView2D as o}from\"./BitmapTileLayerView2D.js\";import{LayerView2DMixin as h}from\"./LayerView2D.js\";import{createBlankImage as n,resampleImage as c}from\"./support/imageUtils.js\";import p from\"../tiling/TileInfoView.js\";import u from\"../tiling/TileKey.js\";import f from\"../tiling/TileQueue.js\";import m from\"../tiling/TileStrategy.js\";import y from\"../../layers/LayerView.js\";import d from\"../../layers/RefreshableLayerView.js\";import g from\"../../layers/TileLayerView.js\";import{createQueryGeometry as w}from\"../../support/drapedUtils.js\";const _=[0,0];let I=class extends(g(d(o(h(y))))){constructor(){super(...arguments),this._tileStrategy=null,this._fetchQueue=null,this.layer=null}get resampling(){return!(\"resampling\"in this.layer)||!1!==this.layer.resampling}update(e){this._fetchQueue.pause(),this._fetchQueue.state=e.state,this._tileStrategy.update(e),this._fetchQueue.resume()}attach(){const e=\"tileServers\"in this.layer?this.layer.tileServers:null;this._tileInfoView=new p(this.layer.tileInfo,this.layer.fullExtent),this._fetchQueue=new f({tileInfoView:this._tileInfoView,concurrency:e&&10*e.length||10,process:(e,t)=>this.fetchTile(e,t)}),this._tileStrategy=new m({cachePolicy:\"keep\",resampling:this.resampling,acquireTile:e=>this.acquireTile(e),releaseTile:e=>this.releaseTile(e),tileInfoView:this._tileInfoView}),this.requestUpdate(),this.handles.add(s((()=>this.resampling),(()=>{this.doRefresh()}))),super.attach()}detach(){super.detach(),this._tileStrategy.destroy(),this._fetchQueue.clear(),this.container.removeAllChildren(),this._fetchQueue=this._tileStrategy=this._tileInfoView=null}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}supportsSpatialReference(e){return a(this.layer.tileInfo?.spatialReference,e)}createFetchPopupFeaturesQueryGeometry(e,t){return w(e,t,this.view)}async doRefresh(){this.updateRequested||this.suspended||(this._fetchQueue.reset(),this._tileStrategy.tiles.forEach((e=>this._enqueueTileFetch(e))))}isUpdating(){return this._fetchQueue?.updating??!1}acquireTile(e){const t=this._bitmapView.createTile(e),i=t.bitmap;return[i.x,i.y]=this._tileInfoView.getTileCoords(_,t.key),i.resolution=this._tileInfoView.getTileResolution(t.key),[i.width,i.height]=this._tileInfoView.tileInfo.size,this._enqueueTileFetch(t),this._bitmapView.addChild(t),this.requestUpdate(),t}releaseTile(e){this._fetchQueue.abort(e.key.id),this._bitmapView.removeChild(e),e.once(\"detach\",(()=>e.destroy())),this.requestUpdate()}async fetchTile(e,t={}){const s=\"tilemapCache\"in this.layer?this.layer.tilemapCache:null,{signal:r,resamplingLevel:l=0}=t;if(!s)try{return await this._fetchImage(e,r)}catch(h){if(!i(h)&&!this.resampling)return n(this._tileInfoView.tileInfo.size);if(l<3){const i=this._tileInfoView.getTileParentId(e.id);if(i){const s=new u(i),r=await this.fetchTile(s,{...t,resamplingLevel:l+1});return c(this._tileInfoView,r,s,e)}}throw h}const a=new u(0,0,0,0);let o;try{if(await s.fetchAvailabilityUpsample(e.level,e.row,e.col,a,{signal:r}),a.level!==e.level&&!this.resampling)return n(this._tileInfoView.tileInfo.size);o=await this._fetchImage(a,r)}catch(h){if(i(h))throw h;o=await this._fetchImage(e,r)}return this.resampling?c(this._tileInfoView,o,a,e):o}async _enqueueTileFetch(e){if(!this._fetchQueue.has(e.key.id)){try{const t=await this._fetchQueue.push(e.key);e.bitmap.source=t,e.bitmap.width=this._tileInfoView.tileInfo.size[0],e.bitmap.height=this._tileInfoView.tileInfo.size[1],e.once(\"attach\",(()=>this.requestUpdate()))}catch(s){i(s)||t.getLogger(this.declaredClass).error(s)}this.requestUpdate()}}async _fetchImage(e,t){return this.layer.fetchTile(e.level,e.row,e.col,{signal:t})}};e([r()],I.prototype,\"_fetchQueue\",void 0),e([r()],I.prototype,\"resampling\",null),I=e([l(\"esri.views.2d.layers.TileLayerView2D\")],I);const V=I;export{V as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Error.js\";import{isSome as t}from\"../../core/maybe.js\";import{eachAlways as o}from\"../../core/promiseUtils.js\";import{property as s}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{calculateTolerance as p}from\"../../renderers/support/clickToleranceUtils.js\";const i=i=>{let c=class extends i{async fetchPopupFeatures(e,s){const{layer:a}=this;if(!e)throw new r(\"tilelayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:a});if(\"tile\"!==a.type)throw new r(\"tilelayerview:fetchPopupFeatures\",\"Layer type should be 'tile'\",{type:a.type});const i=this.get(\"view.scale\"),c=a.allSublayers.toArray().filter((e=>{const r=0===e.minScale||i<=e.minScale,t=0===e.maxScale||i>=e.maxScale;return e.popupTemplate&&e.popupEnabled&&e.visible&&r&&t}));return o(c.map((async r=>{const o=r.createQuery(),a=t(s)?s.event:null,i=p({renderer:r.renderer,event:a});o.geometry=this.createFetchPopupFeaturesQueryGeometry(e,i),o.outFields=await r.popupTemplate.getRequiredFields();return(await r.queryFeatures(o)).features}))).then((e=>[].concat(...e.map((e=>e.value)).filter(Boolean))))}};return e([s()],c.prototype,\"layer\",void 0),c=e([a(\"esri.layers.mixins.TileLayerView\")],c),c};export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nfunction e(e){return e instanceof HTMLImageElement?e.naturalWidth:e.width}function t(e){return e instanceof HTMLImageElement?e.naturalHeight:e.height}function n(n,l,r,u){if(r.level===u.level)return l;const i=n.tileInfo.size,a=n.getTileResolution(r.level),c=n.getTileResolution(u.level);let g=n.getLODInfoAt(u.level);const h=g.getXForColumn(u.col),d=g.getYForRow(u.row);g=n.getLODInfoAt(r.level);const f=g.getXForColumn(r.col),s=g.getYForRow(r.row),m=e(l)/i[0],v=t(l)/i[1],w=Math.round(m*((h-f)/a)),I=Math.round(v*(-(d-s)/a)),M=Math.round(m*i[0]*(c/a)),F=Math.round(v*i[1]*(c/a)),L=o(i);return L.getContext(\"2d\").drawImage(l,w,I,M,F,0,0,i[0],i[1]),L}function o(e){const t=document.createElement(\"canvas\");return[t.width,t.height]=e,t}export{o as createBlankImage,n as resampleImage};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as r}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Logger.js\";import{isAbortError as s}from\"../../core/promiseUtils.js\";import{on as o}from\"../../core/reactiveUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/arrayUtils.js\";import\"../../core/has.js\";import\"../../core/accessorSupport/ensureType.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";const i=i=>{let c=class extends i{initialize(){this.handles.add(o((()=>this.layer),\"refresh\",(r=>{this.doRefresh(r.dataChanged).catch((r=>{s(r)||e.getLogger(this.declaredClass).error(r)}))})),\"RefreshableLayerView\")}};return r([t()],c.prototype,\"layer\",void 0),c=r([a(\"esri.layers.mixins.RefreshableLayerView\")],c),c};export{i as default};\n"],"names":["r","s","this","view","timeline","record","layer","title","_bitmapView","t","_tileInfoView","container","addChild","removeChild","removeAllChildren","e","i","_","I","arguments","_tileStrategy","_fetchQueue","resampling","pause","state","update","resume","tileServers","p","tileInfo","fullExtent","f","tileInfoView","concurrency","length","process","fetchTile","m","cachePolicy","acquireTile","releaseTile","requestUpdate","handles","add","doRefresh","destroy","clear","a","spatialReference","w","updateRequested","suspended","reset","tiles","forEach","_enqueueTileFetch","updating","createTile","bitmap","getTileCoords","key","x","y","resolution","getTileResolution","size","width","height","abort","id","once","tilemapCache","signal","resamplingLevel","l","_fetchImage","n","getTileParentId","u","c","fetchAvailabilityUpsample","level","row","col","o","has","push","source","declaredClass","error","type","get","allSublayers","toArray","filter","minScale","maxScale","popupTemplate","popupEnabled","visible","map","createQuery","event","renderer","geometry","createFetchPopupFeaturesQueryGeometry","getRequiredFields","outFields","queryFeatures","features","then","concat","value","Boolean","prototype","g","d","h","V","getLODInfoAt","getXForColumn","getYForRow","HTMLImageElement","naturalWidth","v","naturalHeight","Math","round","M","F","L","getContext","drawImage","document","createElement","dataChanged","catch"],"sourceRoot":""}